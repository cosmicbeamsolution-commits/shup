(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9128bea"],{"1b1a":function(t,e){t.exports=function t(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce((function(e,n){return e.concat(t(n))}),[]),e;case"Feature":return e.geometry?t(e.geometry).map((function(t){var n={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(n.id=e.id),n})):e;case"MultiPoint":return e.coordinates.map((function(t){return{type:"Point",coordinates:t}}));case"MultiPolygon":return e.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}));case"MultiLineString":return e.coordinates.map((function(t){return{type:"LineString",coordinates:t}}));case"GeometryCollection":return e.geometries.map(t).reduce((function(t,e){return t.concat(e)}),[]);case"Point":case"Polygon":case"LineString":return[e]}}},2532:function(t,e,n){"use strict";var o=n("23e7"),r=n("5a34"),i=n("1d80"),s=n("ab13");o({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(i(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},2954:function(t,e,n){var o=n("70a5"),r=n("786a"),i=n("7a92"),s={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},a=Object.keys(s);function c(t){for(var e=i(),n=o(t),r=0;r<n.length;r++)e.include(n[r]);return e}t.exports=function(t){return c(t).bbox()},t.exports.polygon=function(t){return c(t).polygon()},t.exports.bboxify=function(t){return r(t).map((function(t){if(t){var e=a.some((function(e){return!!t[e]&&-1!==s[e].indexOf(t.type)}));e&&(t.bbox=c(t).bbox(),this.update(t))}}))}},"3e8f":function(t,e){},"44be":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.options,(function(e,o){return n("div",{key:o,staticClass:"control"},[n("b-checkbox",{attrs:{"native-value":o,type:t.type},on:{input:t.input},model:{value:t.newValue,callback:function(e){t.newValue=e},expression:"newValue"}},[t._v(" "+t._s(e)+" ")])],1)})),0)},r=[],i={name:"CheckboxPicker",props:{options:{type:Object,default:null},type:{type:String,default:null},value:{type:Array,default:function(){return[]}}},data:function(){return{newValue:[]}},created:function(){this.newValue=this.value},methods:{input:function(){this.$emit("input",this.newValue)}},watch:{value:function(t){this.newValue=t}}},s=i,a=n("2877"),c=Object(a["a"])(s,o,r,!1,null,null,null);e["a"]=c.exports},5319:function(t,e,n){"use strict";var o=n("d784"),r=n("825a"),i=n("7b0b"),s=n("50c4"),a=n("a691"),c=n("1d80"),u=n("8aa5"),l=n("14c3"),h=Math.max,p=Math.min,d=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,y=function(t){return void 0===t?t:String(t)};o("replace",2,(function(t,e,n,o){return[function(n,o){var r=c(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r,o):e.call(String(r),n,o)},function(t,i){if(o.REPLACE_KEEPS_$0||"string"===typeof i&&-1===i.indexOf("$0")){var c=n(e,t,this,i);if(c.done)return c.value}var d=r(t),f=String(this),g="function"===typeof i;g||(i=String(i));var _=d.global;if(_){var v=d.unicode;d.lastIndex=0}var b=[];while(1){var E=l(d,f);if(null===E)break;if(b.push(E),!_)break;var S=String(E[0]);""===S&&(d.lastIndex=u(f,s(d.lastIndex),v))}for(var C="",x=0,T=0;T<b.length;T++){E=b[T];for(var I=String(E[0]),O=h(p(a(E.index),f.length),0),L=[],M=1;M<E.length;M++)L.push(y(E[M]));var w=E.groups;if(g){var N=[I].concat(L,O,f);void 0!==w&&N.push(w);var P=String(i.apply(void 0,N))}else P=m(I,f,O,L,w,i);O>=x&&(C+=f.slice(x,O)+P,x=O+I.length)}return C+f.slice(x)}];function m(t,n,o,r,s,a){var c=o+t.length,u=r.length,l=g;return void 0!==s&&(s=i(s),l=f),e.call(a,l,(function(e,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,o);case"'":return n.slice(c);case"<":a=s[i.slice(1,-1)];break;default:var l=+i;if(0===l)return e;if(l>u){var h=d(l/10);return 0===h?e:h<=u?void 0===r[h-1]?i.charAt(1):r[h-1]+i.charAt(1):e}a=r[l-1]}return void 0===a?"":a}))}}))},"53a8":function(t,e){t.exports=o;var n=Object.prototype.hasOwnProperty;function o(){for(var t={},e=0;e<arguments.length;e++){var o=arguments[e];for(var r in o)n.call(o,r)&&(t[r]=o[r])}return t}},"55b1":function(t,e){var n=t.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var o=Math.log(Math.pow(2,t))/Math.log(e),r=2;o===1/0;r*=2)o=Math.log(Math.pow(2,t/r))/Math.log(e)*r;var i=o-Math.floor(o),s="";for(r=0;r<Math.floor(o);r++){var a=Math.floor(Math.random()*e).toString(e);s=a+s}if(i){var c=Math.pow(e,i);a=Math.floor(Math.random()*c).toString(e);s=a+s}var u=parseInt(s,e);return u!==1/0&&u>=Math.pow(2,t)?n(t,e):s};n.rack=function(t,e,o){var r=function(r){var s=0;do{if(s++>10){if(!o)throw new Error("too many ID collisions, use more bits");t+=o}var a=n(t,e)}while(Object.hasOwnProperty.call(i,a));return i[a]=r,a},i=r.hats={};return r.get=function(t){return r.hats[t]},r.set=function(t,e){return r.hats[t]=e,r},r.bits=t||128,r.base=e||16,r}},"5a34":function(t,e,n){var o=n("44e7");t.exports=function(t){if(o(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5da1":function(t,e,n){(function(t,n){var o=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,c="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",h="[object Boolean]",p="[object Date]",d="[object Error]",f="[object Function]",g="[object GeneratorFunction]",y="[object Map]",m="[object Number]",_="[object Null]",v="[object Object]",b="[object Promise]",E="[object Proxy]",S="[object RegExp]",C="[object Set]",x="[object String]",T="[object Symbol]",I="[object Undefined]",O="[object WeakMap]",L="[object ArrayBuffer]",M="[object DataView]",w="[object Float32Array]",N="[object Float64Array]",P="[object Int8Array]",A="[object Int16Array]",F="[object Int32Array]",k="[object Uint8Array]",R="[object Uint8ClampedArray]",U="[object Uint16Array]",D="[object Uint32Array]",j=/[\\^$.*+?()[\]{}|]/g,$=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,G={};G[w]=G[N]=G[P]=G[A]=G[F]=G[k]=G[R]=G[U]=G[D]=!0,G[c]=G[u]=G[L]=G[h]=G[M]=G[p]=G[d]=G[f]=G[y]=G[m]=G[v]=G[S]=G[C]=G[x]=G[O]=!1;var B="object"==typeof t&&t&&t.Object===Object&&t,J="object"==typeof self&&self&&self.Object===Object&&self,z=B||J||Function("return this")(),Y=e&&!e.nodeType&&e,X=Y&&"object"==typeof n&&n&&!n.nodeType&&n,q=X&&X.exports===Y,W=q&&B.process,Z=function(){try{return W&&W.binding&&W.binding("util")}catch(t){}}(),H=Z&&Z.isTypedArray;function K(t,e){var n=-1,o=null==t?0:t.length,r=0,i=[];while(++n<o){var s=t[n];e(s,n,t)&&(i[r++]=s)}return i}function Q(t,e){var n=-1,o=e.length,r=t.length;while(++n<o)t[r+n]=e[n];return t}function tt(t,e){var n=-1,o=null==t?0:t.length;while(++n<o)if(e(t[n],n,t))return!0;return!1}function et(t,e){var n=-1,o=Array(t);while(++n<t)o[n]=e(n);return o}function nt(t){return function(e){return t(e)}}function ot(t,e){return t.has(e)}function rt(t,e){return null==t?void 0:t[e]}function it(t){var e=-1,n=Array(t.size);return t.forEach((function(t,o){n[++e]=[o,t]})),n}function st(t,e){return function(n){return t(e(n))}}function at(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var ct=Array.prototype,ut=Function.prototype,lt=Object.prototype,ht=z["__core-js_shared__"],pt=ut.toString,dt=lt.hasOwnProperty,ft=function(){var t=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gt=lt.toString,yt=RegExp("^"+pt.call(dt).replace(j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=q?z.Buffer:void 0,_t=z.Symbol,vt=z.Uint8Array,bt=lt.propertyIsEnumerable,Et=ct.splice,St=_t?_t.toStringTag:void 0,Ct=Object.getOwnPropertySymbols,xt=mt?mt.isBuffer:void 0,Tt=st(Object.keys,Object),It=Oe(z,"DataView"),Ot=Oe(z,"Map"),Lt=Oe(z,"Promise"),Mt=Oe(z,"Set"),wt=Oe(z,"WeakMap"),Nt=Oe(Object,"create"),Pt=Re(It),At=Re(Ot),Ft=Re(Lt),kt=Re(Mt),Rt=Re(wt),Ut=_t?_t.prototype:void 0,Dt=Ut?Ut.valueOf:void 0;function jt(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var o=t[e];this.set(o[0],o[1])}}function $t(){this.__data__=Nt?Nt(null):{},this.size=0}function Vt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Gt(t){var e=this.__data__;if(Nt){var n=e[t];return n===r?void 0:n}return dt.call(e,t)?e[t]:void 0}function Bt(t){var e=this.__data__;return Nt?void 0!==e[t]:dt.call(e,t)}function Jt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Nt&&void 0===e?r:e,this}function zt(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var o=t[e];this.set(o[0],o[1])}}function Yt(){this.__data__=[],this.size=0}function Xt(t){var e=this.__data__,n=de(e,t);if(n<0)return!1;var o=e.length-1;return n==o?e.pop():Et.call(e,n,1),--this.size,!0}function qt(t){var e=this.__data__,n=de(e,t);return n<0?void 0:e[n][1]}function Wt(t){return de(this.__data__,t)>-1}function Zt(t,e){var n=this.__data__,o=de(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}function Ht(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var o=t[e];this.set(o[0],o[1])}}function Kt(){this.size=0,this.__data__={hash:new jt,map:new(Ot||zt),string:new jt}}function Qt(t){var e=Ie(this,t)["delete"](t);return this.size-=e?1:0,e}function te(t){return Ie(this,t).get(t)}function ee(t){return Ie(this,t).has(t)}function ne(t,e){var n=Ie(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}function oe(t){var e=-1,n=null==t?0:t.length;this.__data__=new Ht;while(++e<n)this.add(t[e])}function re(t){return this.__data__.set(t,r),this}function ie(t){return this.__data__.has(t)}function se(t){var e=this.__data__=new zt(t);this.size=e.size}function ae(){this.__data__=new zt,this.size=0}function ce(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function ue(t){return this.__data__.get(t)}function le(t){return this.__data__.has(t)}function he(t,e){var n=this.__data__;if(n instanceof zt){var r=n.__data__;if(!Ot||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ht(r)}return n.set(t,e),this.size=n.size,this}function pe(t,e){var n=je(t),o=!n&&De(t),r=!n&&!o&&Ve(t),i=!n&&!o&&!r&&Xe(t),s=n||o||r||i,a=s?et(t.length,String):[],c=a.length;for(var u in t)!e&&!dt.call(t,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ne(u,c))||a.push(u);return a}function de(t,e){var n=t.length;while(n--)if(Ue(t[n][0],e))return n;return-1}function fe(t,e,n){var o=e(t);return je(t)?o:Q(o,n(t))}function ge(t){return null==t?void 0===t?I:_:St&&St in Object(t)?Le(t):ke(t)}function ye(t){return Ye(t)&&ge(t)==c}function me(t,e,n,o,r){return t===e||(null==t||null==e||!Ye(t)&&!Ye(e)?t!==t&&e!==e:_e(t,e,n,o,me,r))}function _e(t,e,n,o,r,s){var a=je(t),l=je(e),h=a?u:we(t),p=l?u:we(e);h=h==c?v:h,p=p==c?v:p;var d=h==v,f=p==v,g=h==p;if(g&&Ve(t)){if(!Ve(e))return!1;a=!0,d=!1}if(g&&!d)return s||(s=new se),a||Xe(t)?Se(t,e,n,o,r,s):Ce(t,e,h,n,o,r,s);if(!(n&i)){var y=d&&dt.call(t,"__wrapped__"),m=f&&dt.call(e,"__wrapped__");if(y||m){var _=y?t.value():t,b=m?e.value():e;return s||(s=new se),r(_,b,n,o,s)}}return!!g&&(s||(s=new se),xe(t,e,n,o,r,s))}function ve(t){if(!ze(t)||Ae(t))return!1;var e=Be(t)?yt:$;return e.test(Re(t))}function be(t){return Ye(t)&&Je(t.length)&&!!G[ge(t)]}function Ee(t){if(!Fe(t))return Tt(t);var e=[];for(var n in Object(t))dt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Se(t,e,n,o,r,a){var c=n&i,u=t.length,l=e.length;if(u!=l&&!(c&&l>u))return!1;var h=a.get(t);if(h&&a.get(e))return h==e;var p=-1,d=!0,f=n&s?new oe:void 0;a.set(t,e),a.set(e,t);while(++p<u){var g=t[p],y=e[p];if(o)var m=c?o(y,g,p,e,t,a):o(g,y,p,t,e,a);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!tt(e,(function(t,e){if(!ot(f,e)&&(g===t||r(g,t,n,o,a)))return f.push(e)}))){d=!1;break}}else if(g!==y&&!r(g,y,n,o,a)){d=!1;break}}return a["delete"](t),a["delete"](e),d}function Ce(t,e,n,o,r,a,c){switch(n){case M:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!a(new vt(t),new vt(e)));case h:case p:case m:return Ue(+t,+e);case d:return t.name==e.name&&t.message==e.message;case S:case x:return t==e+"";case y:var u=it;case C:var l=o&i;if(u||(u=at),t.size!=e.size&&!l)return!1;var f=c.get(t);if(f)return f==e;o|=s,c.set(t,e);var g=Se(u(t),u(e),o,r,a,c);return c["delete"](t),g;case T:if(Dt)return Dt.call(t)==Dt.call(e)}return!1}function xe(t,e,n,o,r,s){var a=n&i,c=Te(t),u=c.length,l=Te(e),h=l.length;if(u!=h&&!a)return!1;var p=u;while(p--){var d=c[p];if(!(a?d in e:dt.call(e,d)))return!1}var f=s.get(t);if(f&&s.get(e))return f==e;var g=!0;s.set(t,e),s.set(e,t);var y=a;while(++p<u){d=c[p];var m=t[d],_=e[d];if(o)var v=a?o(_,m,d,e,t,s):o(m,_,d,t,e,s);if(!(void 0===v?m===_||r(m,_,n,o,s):v)){g=!1;break}y||(y="constructor"==d)}if(g&&!y){var b=t.constructor,E=e.constructor;b!=E&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E)&&(g=!1)}return s["delete"](t),s["delete"](e),g}function Te(t){return fe(t,qe,Me)}function Ie(t,e){var n=t.__data__;return Pe(e)?n["string"==typeof e?"string":"hash"]:n.map}function Oe(t,e){var n=rt(t,e);return ve(n)?n:void 0}function Le(t){var e=dt.call(t,St),n=t[St];try{t[St]=void 0;var o=!0}catch(i){}var r=gt.call(t);return o&&(e?t[St]=n:delete t[St]),r}jt.prototype.clear=$t,jt.prototype["delete"]=Vt,jt.prototype.get=Gt,jt.prototype.has=Bt,jt.prototype.set=Jt,zt.prototype.clear=Yt,zt.prototype["delete"]=Xt,zt.prototype.get=qt,zt.prototype.has=Wt,zt.prototype.set=Zt,Ht.prototype.clear=Kt,Ht.prototype["delete"]=Qt,Ht.prototype.get=te,Ht.prototype.has=ee,Ht.prototype.set=ne,oe.prototype.add=oe.prototype.push=re,oe.prototype.has=ie,se.prototype.clear=ae,se.prototype["delete"]=ce,se.prototype.get=ue,se.prototype.has=le,se.prototype.set=he;var Me=Ct?function(t){return null==t?[]:(t=Object(t),K(Ct(t),(function(e){return bt.call(t,e)})))}:We,we=ge;function Ne(t,e){return e=null==e?a:e,!!e&&("number"==typeof t||V.test(t))&&t>-1&&t%1==0&&t<e}function Pe(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ae(t){return!!ft&&ft in t}function Fe(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||lt;return t===n}function ke(t){return gt.call(t)}function Re(t){if(null!=t){try{return pt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Ue(t,e){return t===e||t!==t&&e!==e}(It&&we(new It(new ArrayBuffer(1)))!=M||Ot&&we(new Ot)!=y||Lt&&we(Lt.resolve())!=b||Mt&&we(new Mt)!=C||wt&&we(new wt)!=O)&&(we=function(t){var e=ge(t),n=e==v?t.constructor:void 0,o=n?Re(n):"";if(o)switch(o){case Pt:return M;case At:return y;case Ft:return b;case kt:return C;case Rt:return O}return e});var De=ye(function(){return arguments}())?ye:function(t){return Ye(t)&&dt.call(t,"callee")&&!bt.call(t,"callee")},je=Array.isArray;function $e(t){return null!=t&&Je(t.length)&&!Be(t)}var Ve=xt||Ze;function Ge(t,e){return me(t,e)}function Be(t){if(!ze(t))return!1;var e=ge(t);return e==f||e==g||e==l||e==E}function Je(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function ze(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ye(t){return null!=t&&"object"==typeof t}var Xe=H?nt(H):be;function qe(t){return $e(t)?pe(t):Ee(t)}function We(){return[]}function Ze(){return!1}n.exports=Ge}).call(this,n("c8ba"),n("62e4")(t))},"64af":function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},"6ee6":function(t,e,n){"use strict";var o={};n.r(o),n.d(o,"classes",(function(){return c})),n.d(o,"sources",(function(){return u})),n.d(o,"cursors",(function(){return l})),n.d(o,"types",(function(){return h})),n.d(o,"geojsonTypes",(function(){return p})),n.d(o,"modes",(function(){return d})),n.d(o,"events",(function(){return f})),n.d(o,"updateActions",(function(){return g})),n.d(o,"meta",(function(){return y})),n.d(o,"activeStates",(function(){return m})),n.d(o,"interactions",(function(){return _})),n.d(o,"LAT_MIN",(function(){return v})),n.d(o,"LAT_RENDERED_MIN",(function(){return b})),n.d(o,"LAT_MAX",(function(){return E})),n.d(o,"LAT_RENDERED_MAX",(function(){return S})),n.d(o,"LNG_MIN",(function(){return C})),n.d(o,"LNG_MAX",(function(){return x}));const r=function(t,e){const n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},o={on(t,e,o){if(void 0===n[t])throw new Error(`Invalid event type: ${t}`);n[t].push({selector:e,fn:o})},render(t){e.store.featureChanged(t)}},r=function(t,r){const i=n[t];let s=i.length;while(s--){const t=i[s];if(t.selector(r)){t.fn.call(o,r),e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(o),{render:t.render,stop(){t.stop&&t.stop()},trash(){t.trash&&(t.trash(),e.store.render())},combineFeatures(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures(){t.uncombineFeatures&&t.uncombineFeatures()},drag(t){r("drag",t)},click(t){r("click",t)},mousemove(t){r("mousemove",t)},mousedown(t){r("mousedown",t)},mouseup(t){r("mouseup",t)},mouseout(t){r("mouseout",t)},keydown(t){r("keydown",t)},keyup(t){r("keyup",t)},touchstart(t){r("touchstart",t)},touchmove(t){r("touchmove",t)},touchend(t){r("touchend",t)},tap(t){r("tap",t)}}};var i=r,s=n("9a15"),a=n.n(s);const c={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},u={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},l={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},h={POLYGON:"polygon",LINE:"line_string",POINT:"point"},p={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},d={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},f={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},g={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},y={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},m={ACTIVE:"true",INACTIVE:"false"},_=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],v=-90,b=-85,E=90,S=85,C=-270,x=270,T={Point:0,LineString:1,Polygon:2};function I(t,e){const n=T[t.geometry.type]-T[e.geometry.type];return 0===n&&t.geometry.type===p.POLYGON?t.area-e.area:n}function O(t){return t.map(t=>(t.geometry.type===p.POLYGON&&(t.area=a.a.geometry({type:p.FEATURE,property:{},geometry:t.geometry})),t)).sort(I).map(t=>(delete t.area,t))}var L=O;function M(t,e=0){return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}var w=M;function N(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(let e=0,n=t.length;e<n;e++)this.add(t[e]),void 0!==t[e]&&("string"===typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}N.prototype.add=function(t){return this.has(t)?this:(this._length++,"string"===typeof t?this._items[t]=this._length:this._nums[t]=this._length,this)},N.prototype.delete=function(t){return!1===this.has(t)?this:(this._length--,delete this._items[t],delete this._nums[t],this)},N.prototype.has=function(t){return("string"===typeof t||"number"===typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},N.prototype.values=function(){const t=[];return Object.keys(this._items).forEach(e=>{t.push({k:e,v:this._items[e]})}),Object.keys(this._nums).forEach(e=>{t.push({k:JSON.parse(e),v:this._nums[e]})}),t.sort((t,e)=>t.v-e.v).map(t=>t.k)},N.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var P=N;const A=[y.FEATURE,y.MIDPOINT,y.VERTEX];var F={click:k,touch:R};function k(t,e,n){return U(t,e,n,n.options.clickBuffer)}function R(t,e,n){return U(t,e,n,n.options.touchBuffer)}function U(t,e,n,o){if(null===n.map)return[];const r=t?w(t,o):e,i={};n.options.styles&&(i.layers=n.options.styles.map(t=>t.id));const s=n.map.queryRenderedFeatures(r,i).filter(t=>-1!==A.indexOf(t.properties.meta)),a=new P,c=[];return s.forEach(t=>{const e=t.properties.id;a.has(e)||(a.add(e),c.push(t))}),L(c)}function D(t,e){const n=F.click(t,null,e),o={mouse:l.NONE};return n[0]&&(o.mouse=n[0].properties.active===m.ACTIVE?l.MOVE:l.POINTER,o.feature=n[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(o.mouse=l.ADD),e.ui.queueMapClasses(o),e.ui.updateMapClasses(),n[0]}var j=function(t,e){const n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)};const $=4,V=12,G=500;function B(t,e,n={}){const o=null!=n.fineTolerance?n.fineTolerance:$,r=null!=n.grossTolerance?n.grossTolerance:V,i=null!=n.interval?n.interval:G;t.point=t.point||e.point,t.time=t.time||e.time;const s=j(t.point,e.point);return s<o||s<r&&e.time-t.time<i}const J=25,z=250;function Y(t,e,n={}){const o=null!=n.tolerance?n.tolerance:J,r=null!=n.interval?n.interval:z;t.point=t.point||e.point,t.time=t.time||e.time;const i=j(t.point,e.point);return i<o&&e.time-t.time<r}var X=n("55b1"),q=n.n(X);const W=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||q()(),this.type=e.geometry.type};W.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},W.prototype.incomingCoords=function(t){this.setCoordinates(t)},W.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},W.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},W.prototype.setProperty=function(t,e){this.properties[t]=e},W.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:p.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},W.prototype.internal=function(t){const e={id:this.id,meta:y.FEATURE,"meta:type":this.type,active:m.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(const n in this.properties)e[`user_${n}`]=this.properties[n];return{type:p.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Z=W;const H=function(t,e){Z.call(this,t,e)};H.prototype=Object.create(Z.prototype),H.prototype.isValid=function(){return"number"===typeof this.coordinates[0]&&"number"===typeof this.coordinates[1]},H.prototype.updateCoordinate=function(t,e,n){3===arguments.length?this.coordinates=[e,n]:this.coordinates=[t,e],this.changed()},H.prototype.getCoordinate=function(){return this.getCoordinates()};var K=H;const Q=function(t,e){Z.call(this,t,e)};Q.prototype=Object.create(Z.prototype),Q.prototype.isValid=function(){return this.coordinates.length>1},Q.prototype.addCoordinate=function(t,e,n){this.changed();const o=parseInt(t,10);this.coordinates.splice(o,0,[e,n])},Q.prototype.getCoordinate=function(t){const e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},Q.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},Q.prototype.updateCoordinate=function(t,e,n){const o=parseInt(t,10);this.coordinates[o]=[e,n],this.changed()};var tt=Q;const et=function(t,e){Z.call(this,t,e),this.coordinates=this.coordinates.map(t=>t.slice(0,-1))};et.prototype=Object.create(Z.prototype),et.prototype.isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(t=>t.length>2)},et.prototype.incomingCoords=function(t){this.coordinates=t.map(t=>t.slice(0,-1)),this.changed()},et.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},et.prototype.addCoordinate=function(t,e,n){this.changed();const o=t.split(".").map(t=>parseInt(t,10)),r=this.coordinates[o[0]];r.splice(o[1],0,[e,n])},et.prototype.removeCoordinate=function(t){this.changed();const e=t.split(".").map(t=>parseInt(t,10)),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},et.prototype.getCoordinate=function(t){const e=t.split(".").map(t=>parseInt(t,10)),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},et.prototype.getCoordinates=function(){return this.coordinates.map(t=>t.concat([t[0]]))},et.prototype.updateCoordinate=function(t,e,n){this.changed();const o=t.split("."),r=parseInt(o[0],10),i=parseInt(o[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][i]=[e,n]};var nt=et;const ot={MultiPoint:K,MultiLineString:tt,MultiPolygon:nt},rt=(t,e,n,o,r)=>{const i=n.split("."),s=parseInt(i[0],10),a=i[1]?i.slice(1).join("."):null;return t[s][e](a,o,r)},it=function(t,e){if(Z.call(this,t,e),delete this.coordinates,this.model=ot[e.geometry.type],void 0===this.model)throw new TypeError(`${e.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(e.geometry.coordinates)};it.prototype=Object.create(Z.prototype),it.prototype._coordinatesToFeatures=function(t){const e=this.model.bind(this);return t.map(t=>new e(this.ctx,{id:q()(),type:p.FEATURE,properties:{},geometry:{coordinates:t,type:this.type.replace("Multi","")}}))},it.prototype.isValid=function(){return this.features.every(t=>t.isValid())},it.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},it.prototype.getCoordinate=function(t){return rt(this.features,"getCoordinate",t)},it.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(t=>t.type===p.POLYGON?t.getCoordinates():t.coordinates)))},it.prototype.updateCoordinate=function(t,e,n){rt(this.features,"updateCoordinate",t,e,n),this.changed()},it.prototype.addCoordinate=function(t,e,n){rt(this.features,"addCoordinate",t,e,n),this.changed()},it.prototype.removeCoordinate=function(t){rt(this.features,"removeCoordinate",t),this.changed()},it.prototype.getFeatures=function(){return this.features};var st=it;function at(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t}at.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},at.prototype.setSelectedCoordinates=function(t){this._ctx.store.setSelectedCoordinates(t),t.reduce((t,e)=>(void 0===t[e.feature_id]&&(t[e.feature_id]=!0,this._ctx.store.get(e.feature_id).changed()),t),{})},at.prototype.getSelected=function(){return this._ctx.store.getSelected()},at.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},at.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},at.prototype.getFeature=function(t){return this._ctx.store.get(t)},at.prototype.select=function(t){return this._ctx.store.select(t)},at.prototype.deselect=function(t){return this._ctx.store.deselect(t)},at.prototype.deleteFeature=function(t,e={}){return this._ctx.store.delete(t,e)},at.prototype.addFeature=function(t){return this._ctx.store.add(t)},at.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},at.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},at.prototype.setActionableState=function(t={}){const e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},at.prototype.changeMode=function(t,e={},n={}){return this._ctx.events.changeMode(t,e,n)},at.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},at.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},at.prototype.featuresAt=function(t,e,n="click"){if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return F[n](t,e,this._ctx)},at.prototype.newFeature=function(t){const e=t.geometry.type;return e===p.POINT?new K(this._ctx,t):e===p.LINE_STRING?new tt(this._ctx,t):e===p.POLYGON?new nt(this._ctx,t):new st(this._ctx,t)},at.prototype.isInstanceOf=function(t,e){if(t===p.POINT)return e instanceof K;if(t===p.LINE_STRING)return e instanceof tt;if(t===p.POLYGON)return e instanceof nt;if("MultiFeature"===t)return e instanceof st;throw new Error(`Unknown feature class: ${t}`)},at.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)};var ct=at;at.prototype.onSetup=function(){},at.prototype.onDrag=function(){},at.prototype.onClick=function(){},at.prototype.onMouseMove=function(){},at.prototype.onMouseDown=function(){},at.prototype.onMouseUp=function(){},at.prototype.onMouseOut=function(){},at.prototype.onKeyUp=function(){},at.prototype.onKeyDown=function(){},at.prototype.onTouchStart=function(){},at.prototype.onTouchMove=function(){},at.prototype.onTouchEnd=function(){},at.prototype.onTap=function(){},at.prototype.onStop=function(){},at.prototype.onTrash=function(){},at.prototype.onCombineFeature=function(){},at.prototype.onUncombineFeature=function(){},at.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const ut={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},lt=Object.keys(ut);var ht=function(t){const e=Object.keys(t);return function(n,o={}){let r={};const i=e.reduce((e,n)=>(e[n]=t[n],e),new ct(n));function s(t){return function(e){i[t](r,e)}}return{start(){r=i.onSetup(o),lt.forEach(e=>{const n=ut[e];let o=()=>!1;t[n]&&(o=()=>!0),this.on(e,o,s(n))})},stop(){i.onStop(r)},trash(){i.onTrash(r)},combineFeatures(){i.onCombineFeatures(r)},uncombineFeatures(){i.onUncombineFeatures(r)},render(t,e){i.toDisplayFeatures(r,t,e)}}}},pt=function(t){const e=Object.keys(t.options.modes).reduce((e,n)=>(e[n]=ht(t.options.modes[n]),e),{});let n={},o={};const r={};let s=null,a=null;r.drag=function(e,n){n({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:l.DRAG}),a.drag(e)):e.originalEvent.stopPropagation()},r.mousedrag=function(t){r.drag(t,t=>!B(n,t))},r.touchdrag=function(t){r.drag(t,t=>!Y(o,t))},r.mousemove=function(e){const n=void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which;if(1===n)return r.mousedrag(e);const o=D(e,t);e.featureTarget=o,a.mousemove(e)},r.mousedown=function(e){n={time:(new Date).getTime(),point:e.point};const o=D(e,t);e.featureTarget=o,a.mousedown(e)},r.mouseup=function(e){const o=D(e,t);e.featureTarget=o,B(n,{point:e.point,time:(new Date).getTime()})?a.click(e):a.mouseup(e)},r.mouseout=function(t){a.mouseout(t)},r.touchstart=function(e){if(e.originalEvent.preventDefault(),!t.options.touchEnabled)return;o={time:(new Date).getTime(),point:e.point};const n=F.touch(e,null,t)[0];e.featureTarget=n,a.touchstart(e)},r.touchmove=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled)return a.touchmove(e),r.touchdrag(e)},r.touchend=function(e){if(e.originalEvent.preventDefault(),!t.options.touchEnabled)return;const n=F.touch(e,null,t)[0];e.featureTarget=n,Y(o,{time:(new Date).getTime(),point:e.point})?a.tap(e):a.touchend(e)};const c=t=>!(8===t||46===t||t>=48&&t<=57);function u(n,o,r={}){a.stop();const c=e[n];if(void 0===c)throw new Error(`${n} is not valid`);s=n;const u=c(t,o);a=i(u,t),r.silent||t.map.fire(f.MODE_CHANGE,{mode:n}),t.store.setDirty(),t.store.render()}r.keydown=function(e){"mapboxgl-canvas"===(e.srcElement||e.target).classList[0]&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?c(e.keyCode)?a.keydown(e):49===e.keyCode&&t.options.controls.point?u(d.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?u(d.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&u(d.DRAW_POLYGON):(e.preventDefault(),a.trash()))},r.keyup=function(t){c(t.keyCode)&&a.keyup(t)},r.zoomend=function(){t.store.changeZoom()},r.data=function(e){if("style"===e.dataType){const{setup:e,map:n,options:o,store:r}=t,i=o.styles.some(t=>n.getLayer(t.id));i||(e.addLayers(),r.setDirty(),r.render())}};const h={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function p(e){let n=!1;Object.keys(e).forEach(t=>{if(void 0===h[t])throw new Error("Invalid action type");h[t]!==e[t]&&(n=!0),h[t]=e[t]}),n&&t.map.fire(f.ACTIONABLE,{actions:h})}const g={start(){s=t.options.defaultMode,a=i(e[s](t),t)},changeMode:u,actionable:p,currentModeName(){return s},currentModeRender(t,e){return a.render(t,e)},fire(t,e){r[t]&&r[t](e)},addEventListeners(){t.map.on("mousemove",r.mousemove),t.map.on("mousedown",r.mousedown),t.map.on("mouseup",r.mouseup),t.map.on("data",r.data),t.map.on("touchmove",r.touchmove),t.map.on("touchstart",r.touchstart),t.map.on("touchend",r.touchend),t.container.addEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",r.keydown),t.container.addEventListener("keyup",r.keyup))},removeEventListeners(){t.map.off("mousemove",r.mousemove),t.map.off("mousedown",r.mousedown),t.map.off("mouseup",r.mouseup),t.map.off("data",r.data),t.map.off("touchmove",r.touchmove),t.map.off("touchstart",r.touchstart),t.map.off("touchend",r.touchend),t.container.removeEventListener("mouseout",r.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",r.keydown),t.container.removeEventListener("keyup",r.keyup))},trash(t){a.trash(t)},combineFeatures(){a.combineFeatures()},uncombineFeatures(){a.uncombineFeatures()},getMode(){return s}};return g};function dt(t){return[].concat(t).filter(t=>void 0!==t)}var ft=dt;function gt(){const t=this,e=t.ctx.map&&void 0!==t.ctx.map.getSource(u.HOT);if(!e)return c();const n=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:n});let o=[],r=[];t.isDirty?r=t.getAllIds():(o=t.getChangedIds().filter(e=>void 0!==t.get(e)),r=t.sources.hot.filter(e=>e.properties.id&&-1===o.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)).map(t=>t.properties.id)),t.sources.hot=[];const i=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter(t=>{const e=t.properties.id||t.properties.parent;return-1===o.indexOf(e)});const s=i!==t.sources.cold.length||r.length>0;function a(e,o){const r=t.get(e),i=r.internal(n);t.ctx.events.currentModeRender(i,e=>{t.sources[o].push(e)})}if(o.forEach(t=>a(t,"hot")),r.forEach(t=>a(t,"cold")),s&&t.ctx.map.getSource(u.COLD).setData({type:p.FEATURE_COLLECTION,features:t.sources.cold}),t.ctx.map.getSource(u.HOT).setData({type:p.FEATURE_COLLECTION,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(f.SELECTION_CHANGE,{features:t.getSelected().map(t=>t.toGeoJSON()),points:t.getSelectedCoordinates().map(t=>({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:t.coordinates}}))}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){const e=t._deletedFeaturesToEmit.map(t=>t.toGeoJSON());t._deletedFeaturesToEmit=[],t.ctx.map.fire(f.DELETE,{features:e})}function c(){t.isDirty=!1,t.clearChangedIds()}c(),t.ctx.map.fire(f.RENDER,{})}function yt(t){let e;this._features={},this._featureIds=new P,this._selectedFeatureIds=new P,this._selectedCoordinates=[],this._changedFeatureIds=new P,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=()=>{e||(e=requestAnimationFrame(()=>{e=null,gt.call(this)}))},this.isDirty=!1}function mt(t,e){const n=t._selectedCoordinates.filter(e=>t._selectedFeatureIds.has(e.feature_id));t._selectedCoordinates.length===n.length||e.silent||(t._emitSelectionChange=!0),t._selectedCoordinates=n}yt.prototype.createRenderBatch=function(){const t=this.render;let e=0;return this.render=function(){e++},()=>{this.render=t,e>0&&this.render()}},yt.prototype.setDirty=function(){return this.isDirty=!0,this},yt.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},yt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},yt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},yt.prototype.getAllIds=function(){return this._featureIds.values()},yt.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},yt.prototype.delete=function(t,e={}){return ft(t).forEach(t=>{this._featureIds.has(t)&&(this._featureIds.delete(t),this._selectedFeatureIds.delete(t),e.silent||-1===this._deletedFeaturesToEmit.indexOf(this._features[t])&&this._deletedFeaturesToEmit.push(this._features[t]),delete this._features[t],this.isDirty=!0)}),mt(this,e),this},yt.prototype.get=function(t){return this._features[t]},yt.prototype.getAll=function(){return Object.keys(this._features).map(t=>this._features[t])},yt.prototype.select=function(t,e={}){return ft(t).forEach(t=>{this._selectedFeatureIds.has(t)||(this._selectedFeatureIds.add(t),this._changedFeatureIds.add(t),e.silent||(this._emitSelectionChange=!0))}),this},yt.prototype.deselect=function(t,e={}){return ft(t).forEach(t=>{this._selectedFeatureIds.has(t)&&(this._selectedFeatureIds.delete(t),this._changedFeatureIds.add(t),e.silent||(this._emitSelectionChange=!0))}),mt(this,e),this},yt.prototype.clearSelected=function(t={}){return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},yt.prototype.setSelected=function(t,e={}){return t=ft(t),this.deselect(this._selectedFeatureIds.values().filter(e=>-1===t.indexOf(e)),{silent:e.silent}),this.select(t.filter(t=>!this._selectedFeatureIds.has(t)),{silent:e.silent}),this},yt.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},yt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},yt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},yt.prototype.getSelected=function(){return this._selectedFeatureIds.values().map(t=>this.get(t))},yt.prototype.getSelectedCoordinates=function(){const t=this._selectedCoordinates.map(t=>{const e=this.get(t.feature_id);return{coordinates:e.getCoordinate(t.coord_path)}});return t},yt.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},yt.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)},yt.prototype.storeMapConfig=function(){_.forEach(t=>{const e=this.ctx.map[t];e&&(this._mapInitialConfig[t]=this.ctx.map[t].isEnabled())})},yt.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(t=>{const e=this._mapInitialConfig[t];e?this.ctx.map[t].enable():this.ctx.map[t].disable()})},yt.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]};var _t=n("53a8"),vt=n.n(_t);const bt=["mode","feature","mouse"];var Et=function(t){const e={};let n=null,o={mode:null,feature:null,mouse:null},r={mode:null,feature:null,mouse:null};function i(){s({mode:null,feature:null,mouse:null}),a()}function s(t){r=vt()(r,t)}function a(){if(!t.container)return;const e=[],n=[];bt.forEach(t=>{r[t]!==o[t]&&(e.push(`${t}-${o[t]}`),null!==r[t]&&n.push(`${t}-${r[t]}`))}),e.length>0&&t.container.classList.remove(...e),n.length>0&&t.container.classList.add(...n),o=vt()(o,r)}function u(t,e={}){const o=document.createElement("button");return o.className=`${c.CONTROL_BUTTON} ${e.className}`,o.setAttribute("title",e.title),e.container.appendChild(o),o.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation();const r=o.target;if(r===n)return l(),void e.onDeactivate();p(t),e.onActivate()},!0),o}function l(){n&&(n.classList.remove(c.ACTIVE_BUTTON),n=null)}function p(t){l();const o=e[t];o&&o&&"trash"!==t&&(o.classList.add(c.ACTIVE_BUTTON),n=o)}function f(){const n=t.options.controls,o=document.createElement("div");return o.className=`${c.CONTROL_GROUP} ${c.CONTROL_BASE}`,n?(n[h.LINE]&&(e[h.LINE]=u(h.LINE,{container:o,className:c.CONTROL_BUTTON_LINE,title:`LineString tool ${t.options.keybindings?"(l)":""}`,onActivate:()=>t.events.changeMode(d.DRAW_LINE_STRING),onDeactivate:()=>t.events.trash()})),n[h.POLYGON]&&(e[h.POLYGON]=u(h.POLYGON,{container:o,className:c.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${t.options.keybindings?"(p)":""}`,onActivate:()=>t.events.changeMode(d.DRAW_POLYGON),onDeactivate:()=>t.events.trash()})),n[h.POINT]&&(e[h.POINT]=u(h.POINT,{container:o,className:c.CONTROL_BUTTON_POINT,title:`Marker tool ${t.options.keybindings?"(m)":""}`,onActivate:()=>t.events.changeMode(d.DRAW_POINT),onDeactivate:()=>t.events.trash()})),n.trash&&(e.trash=u("trash",{container:o,className:c.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{t.events.trash()}})),n.combine_features&&(e.combine_features=u("combineFeatures",{container:o,className:c.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{t.events.combineFeatures()}})),n.uncombine_features&&(e.uncombine_features=u("uncombineFeatures",{container:o,className:c.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{t.events.uncombineFeatures()}})),o):o}function g(){Object.keys(e).forEach(t=>{const n=e[t];n.parentNode&&n.parentNode.removeChild(n),delete e[t]})}return{setActiveButton:p,queueMapClasses:s,updateMapClasses:a,clearMapClasses:i,addButtons:f,removeButtons:g}},St=function(t){let e=null,n=null;const o={onRemove(){return t.map.off("load",o.connect),clearInterval(n),o.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.map=null,t.container=null,t.store=null,e&&e.parentNode&&e.parentNode.removeChild(e),e=null,this},connect(){t.map.off("load",o.connect),clearInterval(n),o.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd(r){{const t=r.fire;r.fire=function(e,n){let o=arguments;return 1===t.length&&1!==arguments.length&&(o=[vt()({},{type:e},n)]),t.apply(r,o)}}return t.map=r,t.events=pt(t),t.ui=Et(t),t.container=r.getContainer(),t.store=new yt(t),e=t.ui.addButtons(),t.options.boxSelect&&(r.boxZoom.disable(),r.dragPan.disable(),r.dragPan.enable()),r.loaded()?o.connect():(r.on("load",o.connect),n=setInterval(()=>{r.loaded()&&o.connect()},16)),t.events.start(),e},addLayers(){t.map.addSource(u.COLD,{data:{type:p.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(u.HOT,{data:{type:p.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach(e=>{t.map.addLayer(e)}),t.store.setDirty(!0),t.store.render()},removeLayers(){t.options.styles.forEach(e=>{t.map.getLayer(e.id)&&t.map.removeLayer(e.id)}),t.map.getSource(u.COLD)&&t.map.removeSource(u.COLD),t.map.getSource(u.HOT)&&t.map.removeSource(u.HOT)}};return t.setup=o,o},Ct=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function xt(t){return function(e){const n=e.featureTarget;return!!n&&(!!n.properties&&n.properties.meta===t)}}function Tt(t){return!!t.originalEvent&&(!!t.originalEvent.shiftKey&&0===t.originalEvent.button)}function It(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===m.ACTIVE&&t.featureTarget.properties.meta===y.FEATURE))}function Ot(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===m.INACTIVE&&t.featureTarget.properties.meta===y.FEATURE))}function Lt(t){return void 0===t.featureTarget}function Mt(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&t.featureTarget.properties.meta===y.FEATURE)}function wt(t){const e=t.featureTarget;return!!e&&(!!e.properties&&e.properties.meta===y.VERTEX)}function Nt(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey}function Pt(t){return 27===t.keyCode}function At(t){return 13===t.keyCode}var Ft=n("c674"),kt=n.n(Ft);function Rt(t,e){const n=e.getBoundingClientRect();return new kt.a(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))}var Ut=Rt,Dt=function(t,e,n,o){return{type:p.FEATURE,properties:{meta:y.VERTEX,parent:t,coord_path:n,active:o?m.ACTIVE:m.INACTIVE},geometry:{type:p.POINT,coordinates:e}}},jt=function(t,e,n,o){const r=e.geometry.coordinates,i=n.geometry.coordinates;if(r[1]>S||r[1]<b||i[1]>S||i[1]<b)return null;const s=o.project([r[0],r[1]]),a=o.project([i[0],i[1]]),c=o.unproject([(s.x+a.x)/2,(s.y+a.y)/2]);return{type:p.FEATURE,properties:{meta:y.MIDPOINT,parent:t,lng:c.lng,lat:c.lat,coord_path:n.properties.coord_path},geometry:{type:p.POINT,coordinates:[c.lng,c.lat]}}};function $t(t,e={},n=null){const{type:o,coordinates:r}=t.geometry,i=t.properties&&t.properties.id;let s=[];function a(t,n){let o="",r=null;t.forEach((t,a)=>{const u=void 0!==n&&null!==n?`${n}.${a}`:String(a),l=Dt(i,t,u,c(u));if(e.midpoints&&r){const t=jt(i,r,l,e.map);t&&s.push(t)}r=l;const h=JSON.stringify(t);o!==h&&s.push(l),0===a&&(o=h)})}function c(t){return!!e.selectedPaths&&-1!==e.selectedPaths.indexOf(t)}function u(){const n=o.replace(p.MULTI_PREFIX,"");r.forEach((o,r)=>{const i={type:p.FEATURE,properties:t.properties,geometry:{type:n,coordinates:o}};s=s.concat($t(i,e,r))})}return o===p.POINT?s.push(Dt(i,r,n,c(n))):o===p.POLYGON?r.forEach((t,e)=>{a(t,null!==n?`${n}.${e}`:String(e))}):o===p.LINE_STRING?a(r,n):0===o.indexOf(p.MULTI_PREFIX)&&u(),s}var Vt=$t,Gt={enable(t){setTimeout(()=>{t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()},0)},disable(t){setTimeout(()=>{t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()},0)}},Bt=n("2954"),Jt=n.n(Bt);const{LAT_MIN:zt,LAT_MAX:Yt,LAT_RENDERED_MIN:Xt,LAT_RENDERED_MAX:qt,LNG_MIN:Wt,LNG_MAX:Zt}=o;var Ht=function(t,e){let n=zt,o=Yt,r=zt,i=Yt,s=Zt,a=Wt;t.forEach(t=>{const e=Jt()(t),c=e[1],u=e[3],l=e[0],h=e[2];c>n&&(n=c),u<o&&(o=u),u>r&&(r=u),c<i&&(i=c),l<s&&(s=l),h>a&&(a=h)});const c=e;return n+c.lat>qt&&(c.lat=qt-n),r+c.lat>Yt&&(c.lat=Yt-r),o+c.lat<Xt&&(c.lat=Xt-o),i+c.lat<zt&&(c.lat=zt-i),s+c.lng<=Wt&&(c.lng+=360*Math.ceil(Math.abs(c.lng)/360)),a+c.lng>=Zt&&(c.lng-=360*Math.ceil(Math.abs(c.lng)/360)),c},Kt=function(t,e){const n=Ht(t.map(t=>t.toGeoJSON()),e);t.forEach(t=>{const e=t.getCoordinates(),o=t=>{const e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},r=t=>t.map(t=>o(t)),i=t=>t.map(t=>r(t));let s;t.type===p.POINT?s=o(e):t.type===p.LINE_STRING||t.type===p.MULTI_POINT?s=e.map(o):t.type===p.POLYGON||t.type===p.MULTI_LINE_STRING?s=e.map(r):t.type===p.MULTI_POLYGON&&(s=e.map(i)),t.incomingCoords(s)})};const Qt={onSetup:function(t){const e={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(e.initiallySelectedFeatureIds.filter(t=>void 0!==this.getFeature(t))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),e},fireUpdate:function(){this.map.fire(f.UPDATE,{action:g.MOVE,features:this.getSelected().map(t=>t.toGeoJSON())})},fireActionable:function(){const t=this.getSelected(),e=t.filter(t=>this.isInstanceOf("MultiFeature",t));let n=!1;if(t.length>1){n=!0;const e=t[0].type.replace("Multi","");t.forEach(t=>{t.type.replace("Multi","")!==e&&(n=!1)})}const o=e.length>0,r=t.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:o,trash:r})},getUniqueIds:function(t){if(!t.length)return[];const e=t.map(t=>t.properties.id).filter(t=>void 0!==t).reduce((t,e)=>(t.add(e),t),new P);return e.values()},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){Gt.enable(this)},onMouseMove:function(t){return this.stopExtendedInteractions(t)},onMouseOut:function(t){if(t.dragMoving)return this.fireUpdate()}};Qt.onTap=Qt.onClick=function(t,e){return Lt(e)?this.clickAnywhere(t,e):xt(y.VERTEX)(e)?this.clickOnVertex(t,e):Mt(e)?this.clickOnFeature(t,e):void 0},Qt.clickAnywhere=function(t){const e=this.getSelectedIds();e.length&&(this.clearSelectedFeatures(),e.forEach(t=>this.doRender(t))),Gt.enable(this),this.stopExtendedInteractions(t)},Qt.clickOnVertex=function(t,e){this.changeMode(d.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:l.MOVE})},Qt.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},Qt.clickOnFeature=function(t,e){Gt.disable(this),this.stopExtendedInteractions(t);const n=Nt(e),o=this.getSelectedIds(),r=e.featureTarget.properties.id,i=this.isSelected(r);if(!n&&i&&this.getFeature(r).type!==p.POINT)return this.changeMode(d.DIRECT_SELECT,{featureId:r});i&&n?(this.deselect(r),this.updateUIClasses({mouse:l.POINTER}),1===o.length&&Gt.enable(this)):!i&&n?(this.select(r),this.updateUIClasses({mouse:l.MOVE})):i||n||(o.forEach(t=>this.doRender(t)),this.setSelected(r),this.updateUIClasses({mouse:l.MOVE})),this.doRender(r)},Qt.onMouseDown=function(t,e){return It(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&Tt(e)?this.startBoxSelect(t,e):void 0},Qt.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=Ut(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},Qt.onTouchStart=function(t,e){if(It(e))return this.startOnActiveFeature(t,e)},Qt.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},Qt.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:l.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(c.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));const n=Ut(e.originalEvent,this.map.getContainer()),o=Math.min(t.boxSelectStartLocation.x,n.x),r=Math.max(t.boxSelectStartLocation.x,n.x),i=Math.min(t.boxSelectStartLocation.y,n.y),s=Math.max(t.boxSelectStartLocation.y,n.y),a=`translate(${o}px, ${i}px)`;t.boxSelectElement.style.transform=a,t.boxSelectElement.style.WebkitTransform=a,t.boxSelectElement.style.width=`${r-o}px`,t.boxSelectElement.style.height=`${s-i}px`},Qt.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();const n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};Kt(this.getSelected(),n),t.dragMoveLocation=e.lngLat},Qt.onMouseUp=function(t,e){if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){const n=[t.boxSelectStartLocation,Ut(e.originalEvent,this.map.getContainer())],o=this.featuresAt(null,n,"click"),r=this.getUniqueIds(o).filter(t=>!this.isSelected(t));r.length&&(this.select(r),r.forEach(t=>this.doRender(t)),this.updateUIClasses({mouse:l.MOVE}))}this.stopExtendedInteractions(t)},Qt.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?m.ACTIVE:m.INACTIVE,n(e),this.fireActionable(),e.properties.active===m.ACTIVE&&e.geometry.type!==p.POINT&&Vt(e).forEach(n)},Qt.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Qt.onCombineFeatures=function(){const t=this.getSelected();if(0===t.length||t.length<2)return;const e=[],n=[],o=t[0].type.replace("Multi","");for(let r=0;r<t.length;r++){const i=t[r];if(i.type.replace("Multi","")!==o)return;i.type.includes("Multi")?i.getCoordinates().forEach(t=>{e.push(t)}):e.push(i.getCoordinates()),n.push(i.toGeoJSON())}if(n.length>1){const t=this.newFeature({type:p.FEATURE,properties:n[0].properties,geometry:{type:`Multi${o}`,coordinates:e}});this.addFeature(t),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([t.id]),this.map.fire(f.COMBINE_FEATURES,{createdFeatures:[t.toGeoJSON()],deletedFeatures:n})}this.fireActionable()},Qt.onUncombineFeatures=function(){const t=this.getSelected();if(0===t.length)return;const e=[],n=[];for(let o=0;o<t.length;o++){const r=t[o];this.isInstanceOf("MultiFeature",r)&&(r.getFeatures().forEach(t=>{this.addFeature(t),t.properties=r.properties,e.push(t.toGeoJSON()),this.select([t.id])}),this.deleteFeature(r.id,{silent:!0}),n.push(r.toGeoJSON()))}e.length>1&&this.map.fire(f.UNCOMBINE_FEATURES,{createdFeatures:e,deletedFeatures:n}),this.fireActionable()};var te=Qt;const ee=xt(y.VERTEX),ne=xt(y.MIDPOINT),oe={fireUpdate:function(){this.map.fire(f.UPDATE,{action:g.CHANGE_COORDINATES,features:this.getSelected().map(t=>t.toGeoJSON())})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);const n=e.featureTarget.properties,o=t.selectedCoordPaths.indexOf(n.coord_path);Nt(e)||-1!==o?Nt(e)&&-1===o&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];const r=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(t,e){this.startDragging(t,e);const n=e.featureTarget.properties;t.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),t.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(t,e){return e.map(e=>({feature_id:t,coord_path:e}))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){Kt(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,n){const o=t.selectedCoordPaths.map(e=>t.feature.getCoordinate(e)),r=o.map(t=>({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:t}})),i=Ht(r,n);for(let s=0;s<o.length;s++){const e=o[s];t.feature.updateCoordinate(t.selectedCoordPaths[s],e[0]+i.lng,e[1]+i.lat)}},clickNoTarget:function(){this.changeMode(d.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(d.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){const e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===p.POINT)throw new TypeError("direct_select mode doesn't handle point features");const o={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,o.selectedCoordPaths)),this.setSelected(e),Gt.disable(this),this.setActionableState({trash:!0}),o},onStop:function(){Gt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=m.ACTIVE,n(e),Vt(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=m.INACTIVE,n(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort((t,e)=>e.localeCompare(t,"en",{numeric:!0})).forEach(e=>t.feature.removeCoordinate(e)),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(d.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){const n=It(e),o=ee(e),r=0===t.selectedCoordPaths.length;n&&r?this.updateUIClasses({mouse:l.MOVE}):o&&!r?this.updateUIClasses({mouse:l.MOVE}):this.updateUIClasses({mouse:l.NONE}),this.stopDragging(t)},onMouseOut:function(t){t.dragMoving&&this.fireUpdate()}};oe.onTouchStart=oe.onMouseDown=function(t,e){return ee(e)?this.onVertex(t,e):It(e)?this.onFeature(t,e):ne(e)?this.onMidpoint(t,e):void 0},oe.onDrag=function(t,e){if(!0!==t.canDragMove)return;t.dragMoving=!0,e.originalEvent.stopPropagation();const n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat},oe.onClick=function(t,e){return Lt(e)?this.clickNoTarget(t,e):It(e)?this.clickActiveFeature(t,e):Ot(e)?this.clickInactive(t,e):void this.stopDragging(t)},oe.onTap=function(t,e){return Lt(e)?this.clickNoTarget(t,e):It(e)?this.clickActiveFeature(t,e):Ot(e)?this.clickInactive(t,e):void 0},oe.onTouchEnd=oe.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)};var re=oe;const ie={onSetup:function(){const t=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(h.POINT),this.setActionableState({trash:!0}),{point:t}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT)}};ie.onTap=ie.onClick=function(t,e){this.updateUIClasses({mouse:l.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(f.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.point.id]})},ie.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},ie.toDisplayFeatures=function(t,e,n){const o=e.properties.id===t.point.id;if(e.properties.active=o?m.ACTIVE:m.INACTIVE,!o)return n(e)},ie.onTrash=ie.stopDrawingAndRemove,ie.onKeyUp=function(t,e){if(Pt(e)||At(e))return this.stopDrawingAndRemove(t,e)};var se=ie;function ae(t,e){return!!t.lngLat&&(t.lngLat.lng===e[0]&&t.lngLat.lat===e[1])}var ce=ae;const ue={onSetup:function(){const t=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),Gt.disable(this),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(h.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&ce(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:l.ADD}),t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate(`0.${t.currentVertexPosition}`,e.lngLat.lng,e.lngLat.lat),wt(e)&&this.updateUIClasses({mouse:l.POINTER})}};ue.onTap=ue.onClick=function(t,e){return wt(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},ue.onKeyUp=function(t,e){Pt(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT)):At(e)&&this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},ue.onStop=function(t){this.updateUIClasses({mouse:l.NONE}),Gt.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate(`0.${t.currentVertexPosition}`),t.polygon.isValid()?this.map.fire(f.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT,{},{silent:!0})))},ue.toDisplayFeatures=function(t,e,n){const o=e.properties.id===t.polygon.id;if(e.properties.active=o?m.ACTIVE:m.INACTIVE,!o)return n(e);if(0===e.geometry.coordinates.length)return;const r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=y.FEATURE,n(Dt(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),r>3){const o=e.geometry.coordinates[0].length-3;n(Dt(t.polygon.id,e.geometry.coordinates[0][o],`0.${o}`,!1))}if(r<=4){const t=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:p.FEATURE,properties:e.properties,geometry:{coordinates:t,type:p.LINE_STRING}}),3===r)return}return n(e)}},ue.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT)};var le=ue;const he={onSetup:function(t){t=t||{};const e=t.featureId;let n,o,r="forward";if(e){if(n=this.getFeature(e),!n)throw new Error("Could not find a feature with the provided featureId");let i=t.from;if(i&&"Feature"===i.type&&i.geometry&&"Point"===i.geometry.type&&(i=i.geometry),i&&"Point"===i.type&&i.coordinates&&2===i.coordinates.length&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const s=n.coordinates.length-1;if(n.coordinates[s][0]===i[0]&&n.coordinates[s][1]===i[1])o=s+1,n.addCoordinate(o,...n.coordinates[s]);else{if(n.coordinates[0][0]!==i[0]||n.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");r="backwards",o=0,n.addCoordinate(o,...n.coordinates[0])}}else n=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.LINE_STRING,coordinates:[]}}),o=0,this.addFeature(n);return this.clearSelectedFeatures(),Gt.disable(this),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(h.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:o,direction:r}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&ce(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&ce(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:l.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),wt(e)&&this.updateUIClasses({mouse:l.POINTER})}};he.onTap=he.onClick=function(t,e){if(wt(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},he.onKeyUp=function(t,e){At(e)?this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.line.id]}):Pt(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT))},he.onStop=function(t){Gt.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(`${t.currentVertexPosition}`),t.line.isValid()?this.map.fire(f.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT,{},{silent:!0})))},he.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT)},he.toDisplayFeatures=function(t,e,n){const o=e.properties.id===t.line.id;if(e.properties.active=o?m.ACTIVE:m.INACTIVE,!o)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=y.FEATURE,n(Dt(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],`${"forward"===t.direction?e.geometry.coordinates.length-2:1}`,!1)),n(e))};var pe=he,de={simple_select:te,direct_select:re,draw_point:se,draw_polygon:le,draw_line_string:pe};const fe={defaultMode:d.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Ct,modes:de,controls:{},userProperties:!1},ge={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},ye={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function me(t,e){return t.map(t=>t.source?t:vt()(t,{id:`${t.id}.${e}`,source:"hot"===e?u.HOT:u.COLD}))}var _e=function(t={}){let e=vt()(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=vt()(ye,t.controls):e.controls=vt()(ge,t.controls),e=vt()(fe,e),e.styles=me(e.styles,"cold").concat(me(e.styles,"hot")),e},ve=n("5da1"),be=n.n(ve),Ee=n("9491"),Se=n.n(Ee),Ce=function(t,e){return t.length===e.length&&JSON.stringify(t.map(t=>t).sort())===JSON.stringify(e.map(t=>t).sort())},xe=n("a8ac"),Te=n.n(xe);const Ie={Polygon:nt,LineString:tt,Point:K,MultiPolygon:st,MultiLineString:st,MultiPoint:st};var Oe=function(t,e){return e.modes=d,e.getFeatureIdsAt=function(e){const n=F.click({point:e},null,t);return n.map(t=>t.properties.id)},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:p.FEATURE_COLLECTION,features:t.store.getSelectedIds().map(e=>t.store.get(e)).map(t=>t.toGeoJSON())}},e.getSelectedPoints=function(){return{type:p.FEATURE_COLLECTION,features:t.store.getSelectedCoordinates().map(t=>({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:t.coordinates}}))}},e.set=function(n){if(void 0===n.type||n.type!==p.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");const o=t.store.createRenderBatch();let r=t.store.getAllIds().slice();const i=e.add(n),s=new P(i);return r=r.filter(t=>!s.has(t)),r.length&&e.delete(r),o(),i},e.add=function(e){const n=Te.a.hint(e,{precisionWarning:!1}).filter(t=>"message"!==t.level);if(n.length)throw new Error(n[0].message);const o=JSON.parse(JSON.stringify(Se()(e))),r=o.features.map(e=>{if(e.id=e.id||q()(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){const n=Ie[e.geometry.type];if(void 0===n)throw new Error(`Invalid geometry type: ${e.geometry.type}.`);const o=new n(t,e);t.store.add(o)}else{const n=t.store.get(e.id);n.properties=e.properties,be()(n.getCoordinates(),e.geometry.coordinates)||n.incomingCoords(e.geometry.coordinates)}return e.id});return t.store.render(),r},e.get=function(e){const n=t.store.get(e);if(n)return n.toGeoJSON()},e.getAll=function(){return{type:p.FEATURE_COLLECTION,features:t.store.getAll().map(t=>t.toGeoJSON())}},e.delete=function(n){return t.store.delete(n,{silent:!0}),e.getMode()!==d.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(d.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===d.DIRECT_SELECT?t.events.changeMode(d.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(n,o={}){return n===d.SIMPLE_SELECT&&e.getMode()===d.SIMPLE_SELECT?Ce(o.featureIds||[],t.store.getSelectedIds())?e:(t.store.setSelected(o.featureIds,{silent:!0}),t.store.render(),e):n===d.DIRECT_SELECT&&e.getMode()===d.DIRECT_SELECT&&o.featureId===t.store.getSelectedIds()[0]?e:(t.events.changeMode(n,o,{silent:!0}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(n,o,r){return t.store.setFeatureProperty(n,o,r),e},e};const Le=function(t,e){t=_e(t);const n={options:t};e=Oe(n,e),n.api=e;const o=St(n);return e.onAdd=o.onAdd,e.onRemove=o.onRemove,e.types=h,e.options=t,e};function Me(t){Le(t,this)}Me.modes=de;e["a"]=Me},"70a5":function(t,e,n){var o=n("9491"),r=n("1b1a"),i=n("8955");t.exports=function(t){if(!t)return[];var e=r(o(t)),n=[];return e.features.forEach((function(t){t.geometry&&(n=n.concat(i(t.geometry.coordinates)))})),n}},"786a":function(t,e){var n=t.exports=function(t){return new o(t)};function o(t){this.value=t}function r(t,e,n){var o=[],r=[],a=!0;return function t(c){var u=n?i(c):c,l={},h=!0,p={node:u,node_:c,path:[].concat(o),parent:r[r.length-1],parents:r,key:o.slice(-1)[0],isRoot:0===o.length,level:o.length,circular:null,update:function(t,e){p.isRoot||(p.parent.node[p.key]=t),p.node=t,e&&(h=!1)},delete:function(t){delete p.parent.node[p.key],t&&(h=!1)},remove:function(t){f(p.parent.node)?p.parent.node.splice(p.key,1):delete p.parent.node[p.key],t&&(h=!1)},keys:null,before:function(t){l.before=t},after:function(t){l.after=t},pre:function(t){l.pre=t},post:function(t){l.post=t},stop:function(){a=!1},block:function(){h=!1}};if(!a)return p;function d(){if("object"===typeof p.node&&null!==p.node){p.keys&&p.node_===p.node||(p.keys=s(p.node)),p.isLeaf=0==p.keys.length;for(var t=0;t<r.length;t++)if(r[t].node_===c){p.circular=r[t];break}}else p.isLeaf=!0,p.keys=null;p.notLeaf=!p.isLeaf,p.notRoot=!p.isRoot}d();var m=e.call(p,p.node);return void 0!==m&&p.update&&p.update(m),l.before&&l.before.call(p,p.node),h?("object"!=typeof p.node||null===p.node||p.circular||(r.push(p),d(),g(p.keys,(function(e,r){o.push(e),l.pre&&l.pre.call(p,p.node[e],e);var i=t(p.node[e]);n&&y.call(p.node,e)&&(p.node[e]=i.node),i.isLast=r==p.keys.length-1,i.isFirst=0==r,l.post&&l.post.call(p,i),o.pop()})),r.pop()),l.after&&l.after.call(p,p.node),p):p}(t).node}function i(t){if("object"===typeof t&&null!==t){var e;if(f(t))e=[];else if(c(t))e=new Date(t.getTime?t.getTime():t);else if(u(t))e=new RegExp(t);else if(l(t))e={message:t.message};else if(h(t))e=new Boolean(t);else if(p(t))e=new Number(t);else if(d(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},o=function(){};o.prototype=n,e=new o}return g(s(t),(function(n){e[n]=t[n]})),e}return t}o.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var o=t[n];if(!e||!y.call(e,o)){e=void 0;break}e=e[o]}return e},o.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var o=t[n];if(!e||!y.call(e,o))return!1;e=e[o]}return!0},o.prototype.set=function(t,e){for(var n=this.value,o=0;o<t.length-1;o++){var r=t[o];y.call(n,r)||(n[r]={}),n=n[r]}return n[t[o]]=e,e},o.prototype.map=function(t){return r(this.value,t,!0)},o.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},o.prototype.reduce=function(t,e){var n=1===arguments.length,o=n?this.value:e;return this.forEach((function(e){this.isRoot&&n||(o=t.call(this,o,e))})),o},o.prototype.paths=function(){var t=[];return this.forEach((function(e){t.push(this.path)})),t},o.prototype.nodes=function(){var t=[];return this.forEach((function(e){t.push(this.node)})),t},o.prototype.clone=function(){var t=[],e=[];return function n(o){for(var r=0;r<t.length;r++)if(t[r]===o)return e[r];if("object"===typeof o&&null!==o){var a=i(o);return t.push(o),e.push(a),g(s(o),(function(t){a[t]=n(o[t])})),t.pop(),e.pop(),a}return o}(this.value)};var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function a(t){return Object.prototype.toString.call(t)}function c(t){return"[object Date]"===a(t)}function u(t){return"[object RegExp]"===a(t)}function l(t){return"[object Error]"===a(t)}function h(t){return"[object Boolean]"===a(t)}function p(t){return"[object Number]"===a(t)}function d(t){return"[object String]"===a(t)}var f=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},g=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};g(s(o.prototype),(function(t){n[t]=function(e){var n=[].slice.call(arguments,1),r=new o(e);return r[t].apply(r,n)}}));var y=Object.hasOwnProperty||function(t,e){return e in t}},"7a92":function(t,e){function n(t){if(!(this instanceof n))return new n(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}t.exports=n,n.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},n.prototype.equals=function(t){var e;return e=t instanceof n?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},n.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},n.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof n?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},n.prototype.bbox=function(){return this._valid?this._bbox:null},n.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],n=t[1];return this._bbox[0]<=e&&this._bbox[1]<=n&&this._bbox[2]>=e&&this._bbox[3]>=n},n.prototype.intersect=function(t){return this._valid?(e=t instanceof n?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},n.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},n.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},"7e12":function(t,e,n){var o=n("da84"),r=n("58a8").trim,i=n("5899"),s=o.parseFloat,a=1/s(i+"-0")!==-1/0;t.exports=a?function(t){var e=r(String(t)),n=s(e);return 0===n&&"-"==e.charAt(0)?-0:n}:s},"7f7f":function(t,e,n){(function(t,o){var r=function(){var t=function(t,e,n,o){for(n=n||{},o=t.length;o--;n[t[o]]=e);return n},e=[1,12],n=[1,13],o=[1,9],r=[1,10],i=[1,11],s=[1,14],a=[1,15],c=[14,18,22,24],u=[18,22],l=[22,24],h={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,o,r,i,s){var a=i.length-1;switch(r){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=i[a-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[a-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[a-2],i[a]];break;case 16:this.$={},this.$[i[a][0]]=i[a][1];break;case 17:this.$=i[a-2],void 0!==i[a-2][i[a][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(i[a][0])),i[a-2][i[a][0]]=i[a][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[a]];break;case 21:this.$=i[a-2],i[a-2].push(i[a]);break}},table:[{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,12:1,13:2,15:7,16:8,17:s,23:a},{1:[3]},{14:[1,16]},t(c,[2,7]),t(c,[2,8]),t(c,[2,9]),t(c,[2,10]),t(c,[2,11]),t(c,[2,12]),t(c,[2,3]),t(c,[2,4]),t(c,[2,5]),t([14,18,21,22,24],[2,1]),t(c,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:23,15:7,16:8,17:s,23:a,24:[1,21],25:22},{1:[2,6]},t(c,[2,13]),{18:[1,24],22:[1,25]},t(u,[2,16]),{21:[1,26]},t(c,[2,18]),{22:[1,28],24:[1,27]},t(l,[2,20]),t(c,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:30,15:7,16:8,17:s,23:a},t(c,[2,19]),{3:5,4:e,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:31,15:7,16:8,17:s,23:a},t(u,[2,17]),t(u,[2,15]),t(l,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable){function n(t,e){this.message=t,this.hash=e}throw n.prototype=Error,new n(t,e)}this.trace(t)},parse:function(t){var e=this,n=[0],o=[null],r=[],i=this.table,s="",a=0,c=0,u=0,l=2,h=1,p=r.slice.call(arguments,1),d=Object.create(this.lexer),f={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(f.yy[g]=this.yy[g]);d.setInput(t,f.yy),f.yy.lexer=d,f.yy.parser=this,"undefined"==typeof d.yylloc&&(d.yylloc={});var y=d.yylloc;r.push(y);var m=d.options&&d.options.ranges;"function"===typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;var _,v,b,E,S,C,x,T,I,O=function(){var t;return t=d.lex()||h,"number"!==typeof t&&(t=e.symbols_[t]||t),t},L={};while(1){if(b=n[n.length-1],this.defaultActions[b]?E=this.defaultActions[b]:(null!==_&&"undefined"!=typeof _||(_=O()),E=i[b]&&i[b][_]),"undefined"===typeof E||!E.length||!E[0]){var M="";for(C in I=[],i[b])this.terminals_[C]&&C>l&&I.push("'"+this.terminals_[C]+"'");M=d.showPosition?"Parse error on line "+(a+1)+":\n"+d.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(a+1)+": Unexpected "+(_==h?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(M,{text:d.match,token:this.terminals_[_]||_,line:d.yylineno,loc:y,expected:I})}if(E[0]instanceof Array&&E.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+_);switch(E[0]){case 1:n.push(_),o.push(d.yytext),r.push(d.yylloc),n.push(E[1]),_=null,v?(_=v,v=null):(c=d.yyleng,s=d.yytext,a=d.yylineno,y=d.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[E[1]][1],L.$=o[o.length-x],L._$={first_line:r[r.length-(x||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(x||1)].first_column,last_column:r[r.length-1].last_column},m&&(L._$.range=[r[r.length-(x||1)].range[0],r[r.length-1].range[1]]),S=this.performAction.apply(L,[s,c,a,f.yy,E[1],o,r].concat(p)),"undefined"!==typeof S)return S;x&&(n=n.slice(0,-1*x*2),o=o.slice(0,-1*x),r=r.slice(0,-1*x)),n.push(this.productions_[E[1]][0]),o.push(L.$),r.push(L._$),T=i[n[n.length-2]][n[n.length-1]],n.push(T);break;case 3:return!0}}return!0}},p=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var o=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===o.length?this.yylloc.first_column:0)+o[o.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,o,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),o=t[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),i=0;i<r.length;i++)if(n=this._input.match(this.rules[r[i]]),n&&(!e||n[0].length>e[0].length)){if(e=n,o=i,this.options.backtrack_lexer){if(t=this.test_match(n,r[i]),!1!==t)return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?(t=this.test_match(e,r[o]),!1!==t&&t):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions["INITIAL"].rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,o){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return t}();function d(){this.yy={}}return h.lexer=p,d.prototype=h,h.Parser=d,new d}();e.parser=r,e.Parser=r.Parser,e.parse=function(){return r.parse.apply(r,arguments)},e.main=function(o){o[1]||(console.log("Usage: "+o[0]+" FILE"),t.exit(1));var r=n("3e8f").readFileSync(n("df7c").normalize(o[1]),"utf8");return e.parser.parse(r)},n.c[n.s]===o&&e.main(t.argv.slice(1))}).call(this,n("4362"),n("62e4")(t))},8955:function(t,e){t.exports=function(t){return e(t);function e(t){return Array.isArray(t)&&t.length&&"number"===typeof t[0]?[t]:t.reduce((function(t,n){return Array.isArray(n)&&Array.isArray(n[0])?t.concat(e(n)):(t.push(n),t)}),[])}}},9491:function(t,e){t.exports=o;var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function o(t){if(!t||!t.type)return null;var e=n[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null}},"9a15":function(t,e,n){var o=n("64af");function r(t){var e,n=0;switch(t.type){case"Polygon":return i(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=i(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=r(t.geometries[e]);return n}}function i(t){var e=0;if(t&&t.length>0){e+=Math.abs(s(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(s(t[n]))}return e}function s(t){var e,n,r,i,s,c,u,l=0,h=t.length;if(h>2){for(u=0;u<h;u++)u===h-2?(i=h-2,s=h-1,c=0):u===h-1?(i=h-1,s=0,c=1):(i=u,s=u+1,c=u+2),e=t[i],n=t[s],r=t[c],l+=(a(r[0])-a(e[0]))*Math.sin(a(n[1]));l=l*o.RADIUS*o.RADIUS/2}return l}function a(t){return t*Math.PI/180}t.exports.geometry=r,t.exports.ring=s},a8ac:function(t,e,n){var o=n("7f7f"),r=n("b2d2");function i(t,e){var n,i=[];if("object"===typeof t)n=t;else{if("string"!==typeof t)return[{message:"Expected string or object as input",line:0}];try{n=o.parse(t)}catch(c){var s=c.message.match(/line (\d+)/),a=parseInt(s[1],10);return[{line:a-1,message:c.message,error:c}]}}return i=i.concat(r.hint(n,e)),i}t.exports.hint=i},ab13:function(t,e,n){var o=n("b622"),r=o("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(o){}}return!1}},acd8:function(t,e,n){var o=n("23e7"),r=n("7e12");o({global:!0,forced:parseFloat!=r},{parseFloat:r})},b106:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={enable:function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()}),0)},disable:function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()}),0)}},r={onSetup:function(t){var e=this.newFeature({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),o.disable(this),this.updateUIClasses({mouse:"add"}),this.setActionableState({trash:!0}),{rectangle:e}},onTap:function(t,e){t.startPoint&&this.onMouseMove(t,e),this.onClick(t,e)},onClick:function(t,e){t.startPoint&&t.startPoint[0]!==e.lngLat.lng&&t.startPoint[1]!==e.lngLat.lat&&(this.updateUIClasses({mouse:"pointer"}),t.endPoint=[e.lngLat.lng,e.lngLat.lat],this.changeMode("simple_select",{featuresId:t.rectangle.id}));var n=[e.lngLat.lng,e.lngLat.lat];t.startPoint=n},onMouseMove:function(t,e){t.startPoint&&(t.rectangle.updateCoordinate("0.0",t.startPoint[0],t.startPoint[1]),t.rectangle.updateCoordinate("0.1",e.lngLat.lng,t.startPoint[1]),t.rectangle.updateCoordinate("0.2",e.lngLat.lng,e.lngLat.lat),t.rectangle.updateCoordinate("0.3",t.startPoint[0],e.lngLat.lat),t.rectangle.updateCoordinate("0.4",t.startPoint[0],t.startPoint[1]))},onKeyUp:function(t,e){if(27===e.keyCode)return this.changeMode("simple_select")},onStop:function(t){o.enable(this),this.updateUIClasses({mouse:"none"}),this.activateUIButton(),void 0!==this.getFeature(t.rectangle.id)&&(t.rectangle.removeCoordinate("0.4"),t.rectangle.isValid()?this.map.fire("draw.create",{features:[t.rectangle.toGeoJSON()]}):(this.deleteFeature([t.rectangle.id],{silent:!0}),this.changeMode("simple_select",{},{silent:!0})))},toDisplayFeatures:function(t,e,n){var o=e.properties.id===t.rectangle.id;return e.properties.active=o?"true":"false",o?t.startPoint?n(e):void 0:n(e)},onTrash:function(t){this.deleteFeature([t.rectangle.id],{silent:!0}),this.changeMode("simple_select")}};e.default=r},b2d2:function(t,e,n){var o=n("b569");function r(t,e){var n=[],r=0,i=10,s=6;function a(t){if(e&&!1===e.noDuplicateMembers||!t.__duplicateProperties__||n.push({message:"An object contained duplicate members, making parsing ambigous: "+t.__duplicateProperties__.join(", "),line:t.__line__}),!u(t,"type","string"))if(x[t.type])t&&x[t.type](t);else{var o=T[t.type.toLowerCase()];void 0!==o?n.push({message:"Expected "+o+" but got "+t.type+" (case sensitive)",line:t.__line__}):n.push({message:"The type "+t.type+" is unknown",line:t.__line__})}}function c(t,e){return t.every((function(t){return null!==t&&typeof t===e}))}function u(t,e,o){if("undefined"===typeof t[e])return n.push({message:'"'+e+'" member required',line:t.__line__});if("array"===o){if(!Array.isArray(t[e]))return n.push({message:'"'+e+'" member should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else{if("object"===o&&t[e]&&t[e].constructor!==Object)return n.push({message:'"'+e+'" member should be '+o+", but is an "+t[e].constructor.name+" instead",line:t.__line__});if(o&&typeof t[e]!==o)return n.push({message:'"'+e+'" member should be '+o+", but is an "+typeof t[e]+" instead",line:t.__line__})}}function l(t){if(d(t),f(t),void 0!==t.properties&&n.push({message:'FeatureCollection object cannot contain a "properties" member',line:t.__line__}),void 0!==t.coordinates&&n.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:t.__line__}),!u(t,"features","array")){if(!c(t.features,"object"))return n.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(C)}}function h(t,o){if(!Array.isArray(t))return n.push({message:"position should be an array, is a "+typeof t+" instead",line:t.__line__||o});if(t.length<2)return n.push({message:"position must have 2 or more elements",line:t.__line__||o});if(t.length>3)return n.push({message:"position should not have more than 3 elements",level:"message",line:t.__line__||o});if(!c(t,"number"))return n.push({message:"each element in a position must be a number",line:t.__line__||o});if(e&&e.precisionWarning){if(r===i)return r+=1,n.push({message:"truncated warnings: we've encountered coordinate precision warning "+i+" times, no more warnings will be reported",level:"message",line:t.__line__||o});r<i&&t.forEach((function(e){var i=0,a=String(e).split(".")[1];if(void 0!==a&&(i=a.length),i>s)return r+=1,n.push({message:"precision of coordinates should be reduced",level:"message",line:t.__line__||o})}))}}function p(t,e,o,r){if(void 0===r&&void 0!==t.__line__&&(r=t.__line__),0===o)return h(t,r);if(1===o&&e)if("LinearRing"===e){if(!Array.isArray(t[t.length-1]))return n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r}),!0;if(t.length<4&&n.push({message:"a LinearRing of coordinates needs to have four or more positions",line:r}),t.length&&(t[t.length-1].length!==t[0].length||!t[t.length-1].every((function(e,n){return t[0][n]===e}))))return n.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:r}),!0}else if("Line"===e&&t.length<2)return n.push({message:"a line needs to have two or more coordinates to be valid",line:r});if(Array.isArray(t)){var i=t.map((function(t){return p(t,e,o-1,t.__line__||r)}));return i.some((function(t){return t}))}n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r})}function d(t){if(t.crs){var e="urn:ogc:def:crs:OGC:1.3:CRS84";"object"===typeof t.crs&&t.crs.properties&&t.crs.properties.name===e?n.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:t.__line__}):n.push({message:"old-style crs member is not recommended",line:t.__line__})}}function f(t){if(t.bbox)return Array.isArray(t.bbox)?(c(t.bbox,"number")||n.push({message:"each element in a bbox member must be a number",line:t.bbox.__line__}),4!==t.bbox.length&&6!==t.bbox.length&&n.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:t.bbox.__line__}),n.length):void n.push({message:"bbox member must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__})}function g(t){void 0!==t.properties&&n.push({message:'geometry object cannot contain a "properties" member',line:t.__line__}),void 0!==t.geometry&&n.push({message:'geometry object cannot contain a "geometry" member',line:t.__line__}),void 0!==t.features&&n.push({message:'geometry object cannot contain a "features" member',line:t.__line__})}function y(t){d(t),f(t),g(t),u(t,"coordinates","array")||h(t.coordinates)}function m(t){d(t),f(t),u(t,"coordinates","array")||p(t.coordinates,"LinearRing",2)||o(t,n)}function _(t){d(t),f(t),u(t,"coordinates","array")||p(t.coordinates,"LinearRing",3)||o(t,n)}function v(t){d(t),f(t),u(t,"coordinates","array")||p(t.coordinates,"Line",1)}function b(t){d(t),f(t),u(t,"coordinates","array")||p(t.coordinates,"Line",2)}function E(t){d(t),f(t),u(t,"coordinates","array")||p(t.coordinates,"",1)}function S(t){d(t),f(t),u(t,"geometries","array")||(c(t.geometries,"object")||n.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:t.__line__}),1===t.geometries.length&&n.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:t.geometries.__line__}),t.geometries.forEach((function(e){e&&("GeometryCollection"===e.type&&n.push({message:"GeometryCollection should avoid nested geometry collections",line:t.geometries.__line__}),a(e))})))}function C(t){d(t),f(t),void 0!==t.id&&"string"!==typeof t.id&&"number"!==typeof t.id&&n.push({message:'Feature "id" member must have a string or number value',line:t.__line__}),void 0!==t.features&&n.push({message:'Feature object cannot contain a "features" member',line:t.__line__}),void 0!==t.coordinates&&n.push({message:'Feature object cannot contain a "coordinates" member',line:t.__line__}),"Feature"!==t.type&&n.push({message:"GeoJSON features must have a type=feature member",line:t.__line__}),u(t,"properties","object"),u(t,"geometry","object")||t.geometry&&a(t.geometry)}var x={Point:y,Feature:C,MultiPoint:E,LineString:v,MultiLineString:b,FeatureCollection:l,GeometryCollection:S,Polygon:m,MultiPolygon:_},T=Object.keys(x).reduce((function(t,e){return t[e.toLowerCase()]=e,t}),{});return"object"!==typeof t||null===t||void 0===t?(n.push({message:"The root of a GeoJSON object must be an object.",line:0}),n):(a(t),n.forEach((function(t){({}).hasOwnProperty.call(t,"line")&&void 0===t.line&&delete t.line})),n)}t.exports.hint=r},b569:function(t,e){function n(t){return t*Math.PI/180}function o(t){var e=0;if(t.length>2)for(var o,r,i=0;i<t.length-1;i++)o=t[i],r=t[i+1],e+=n(r[0]-o[0])*(2+Math.sin(n(o[1]))+Math.sin(n(r[1])));return e>=0}function r(t){if(t&&t.length>0){if(o(t[0]))return!1;var e=t.slice(1,t.length);if(!e.every(o))return!1}return!0}function i(t){return"Polygon"===t.type?r(t.coordinates):"MultiPolygon"===t.type?t.coordinates.every(r):void 0}t.exports=function(t,e){i(t)||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:t.__line__})}},bee2:function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",(function(){return r}))},c20d:function(t,e,n){var o=n("da84"),r=n("58a8").trim,i=n("5899"),s=o.parseInt,a=/^[+-]?0[Xx]/,c=8!==s(i+"08")||22!==s(i+"0x16");t.exports=c?function(t,e){var n=r(String(t));return s(n,e>>>0||(a.test(n)?16:10))}:s},c674:function(t,e,n){"use strict";function o(t,e){this.x=t,this.y=e}t.exports=o,o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),o=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=o,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),o=Math.sin(t),r=e.x+n*(this.x-e.x)-o*(this.y-e.y),i=e.y+o*(this.x-e.x)+n*(this.y-e.y);return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t}},d4ec:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return o}))},e25e:function(t,e,n){var o=n("23e7"),r=n("c20d");o({global:!0,forced:parseInt!=r},{parseInt:r})}}]);
//# sourceMappingURL=chunk-f9128bea.19815e6b.js.map
{"version":3,"sources":["webpack:///./src/views/Delivery.vue?4c7e","webpack:///./src/views/Delivery.vue?4754","webpack:///src/views/Delivery.vue","webpack:///./src/views/Delivery.vue?2284","webpack:///./src/views/Delivery.vue","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isModalActive","item","on","trashConfirm","trashCancel","_v","staticClass","slot","getData","print","_l","index","key","$event","showPartial","class","activeIndex","total_deliveries","formatted_date","Object","keys","partial","staticRenderFns","name","components","NavBar","AsideMenu","HeroBar","SaleBox","CardWidget","CardComponent","Notification","data","map","features","coordinates","sockets","sale","created","window","set_delivery_code","input","self","updateItem","id","e","properties","_id","title","res","value","join","description","geojson","type","popup","length","remove","message","computed","titleStack","methods","Promise","resolve","setTimeout","showItem","$store","dispatch","find","sort","grouped","forEach","date","i","sales","row","drawMap","container","style","center","customer","geo","lng","lat","zoom","push","coordinate","delivery_code","loadImage","error","addImage","image","addSource","addLayer","geometry","slice","Math","abs","lngLat","document","getElementById","select","getCanvas","cursor","bounds","reduce","extend","fitBounds","padding","offset","trashModal","trashObject","isLoading","component","$","isObject","isArray","toAbsoluteIndex","toLength","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","SPECIES","nativeSlice","max","target","proto","forced","start","end","Constructor","result","n","O","k","fin","undefined","constructor","Array","prototype","call"],"mappings":"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","file":"js/chunk-607cdbfe.a0735673.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Delivery.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Delivery.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('sale-box',{attrs:{\"is-active\":_vm.isModalActive,\"data-item\":_vm.item},on:{\"confirm\":_vm.trashConfirm,\"cancel\":_vm.trashCancel}}),_c('nav-bar'),_c('aside-menu'),_c('hero-bar',[_c('b-icon',{attrs:{\"icon\":\"map-marker-multiple-outline\",\"size\":\"is-medium\"}}),_vm._v(\" Entregas \"),_c('div',{staticClass:\"buttons\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('a',{staticClass:\"button \",on:{\"click\":_vm.getData}},[_c('span',[_vm._v(\"Actualizar\")])]),_c('a',{staticClass:\"button \",on:{\"click\":_vm.print}},[_c('span',[_vm._v(\"Imprimir\")])])])],1),_c('section',{staticClass:\"section is-main-section\"},[_c('div',{staticClass:\"columns\"},_vm._l((_vm.data),function(item,index){return _c('div',{key:index,staticClass:\"column is-clickable\",on:{\"click\":function($event){return _vm.showPartial(index)}}},[_c('card-widget',{staticClass:\"tile is-child is-clickable\",class:{ 'is-active': _vm.activeIndex === index },attrs:{\"type\":\"is-light\",\"icon\":\"map-marker-multiple-outline\",\"number\":item.total_deliveries,\"label\":item.formatted_date}})],1)}),0),(Object.keys(_vm.partial).length)?_c('card-component',[_c('div',{attrs:{\"id\":\"map\"}})]):_c('notification',{staticClass:\"is-info\"},[_c('p',[_vm._v(\"No hay pedidos activos por el momento\")])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <sale-box :is-active=\"isModalActive\" :data-item=\"item\" @confirm=\"trashConfirm\" @cancel=\"trashCancel\"/>\n    <nav-bar/>\n    <aside-menu/>\n    <hero-bar>\n      <b-icon icon=\"map-marker-multiple-outline\" size=\"is-medium\"/>\n      Entregas\n      <div class=\"buttons\" slot=\"right\">\n        <a class=\"button \" @click=\"getData\">\n          <span>Actualizar</span>\n        </a>\n        <a class=\"button \" @click=\"print\">\n          <span>Imprimir</span>\n        </a>\n      </div>\n    </hero-bar>\n    <section class=\"section is-main-section\">\n      <div class=\"columns\">\n        <div v-for=\"(item, index) in data\" :key=\"index\" class=\"column is-clickable\" @click=\"showPartial(index)\">\n          <card-widget class=\"tile is-child is-clickable\" :class=\"{ 'is-active': activeIndex === index }\" type=\"is-light\" icon=\"map-marker-multiple-outline\" :number=\"item.total_deliveries\" :label=\"item.formatted_date\"/>\n        </div>\n      </div>\n      <card-component v-if=\"Object.keys(partial).length\">\n        <div id=\"map\"></div>\n      </card-component>\n      <notification v-else class=\"is-info\">\n        <p>No hay pedidos activos por el momento</p>\n      </notification>\n    </section>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport moment from 'moment'\nimport NavBar from '@/components/NavBar'\nimport AsideMenu from '@/components/AsideMenu'\nimport CardComponent from '@/components/CardComponent'\nimport HeroBar from '@/components/HeroBar'\nimport SaleBox from '@/components/SaleBox'\nimport CardWidget from '@/components/CardWidget'\nimport mapboxgl from 'mapbox-gl'\nimport Notification from '@/components/Notification'\nexport default {\n  name: 'Delivery',\n  components: {\n    NavBar,\n    AsideMenu,\n    HeroBar,\n    SaleBox,\n    CardWidget,\n    CardComponent,\n    Notification\n  },\n  data () {\n    return {\n      isModalActive: false,\n      activeIndex: 0,\n      map: null,\n      item: {},\n      data: [],\n      partial: [],\n      features: [],\n      coordinates: []\n    }\n  },\n  sockets: {\n    sale (data) {\n      this.getData()\n    }\n  },\n  created () {\n    let self = this\n    this.getData()\n    window.set_delivery_code = (id) => {\n      const input = document.getElementById(id)\n      if (input) {\n        const value = input.value.toUpperCase()\n        self.updateItem(id, { delivery_code: value }).then(res => {\n          this.features.map(e => {\n            if (e.properties._id === id) {\n              e.properties.title = ['#' + res.id, input.value].join(' - ')\n              e.properties.description = [`<h6 class=\"subtitle has-text-weight-bold is-marginless\">Código de Entrega</h6>`, `<p>Zona y prioridad ej. A1, C5, etc</p>`, `<div class=\"field has-addons\"><div class=\"control\"><input class=\"input\" type=\"text\" id=\"${id}\" value=\"${value}\"></div><div class=\"control\"><input class=\"button is-info\" type=\"button\" onclick=\"set_delivery_code('${id}')\" value=\"OK\"></div></div>`].join('')\n            }\n            return e\n          })\n          var geojson = {\n            type: 'FeatureCollection',\n            features: this.features\n          }\n          this.map.getSource('markers').setData(geojson)\n          const popup = document.getElementsByClassName('mapboxgl-popup')\n          if (popup.length) {\n            popup[0].remove()\n          }\n          this.$buefy.toast.open({\n            message: `Zona de Entrega actualizada`\n          })\n        })\n      }\n    }\n  },\n  computed: {\n    titleStack () {\n      return [\n        'Gestor',\n        'Entregas'\n      ]\n    }\n  },\n  methods: {\n    updateItem (id, payload) {\n      return new Promise((resolve, reject) => {\n        axios.post(`/sales/${id}`, payload).then(res => {\n          resolve(res.data)\n        })\n      })\n    },\n    showPartial (index) {\n      this.activeIndex = index\n      this.partial = this.data[index]\n      setTimeout(() => {\n        this.drawMap()\n      }, 700)\n    },\n    print (id) {\n      window.print()\n      // window.open('/sales/print/' + id, id, `height=${window.screen.availHeight},width=${window.screen.availWidth}`)\n    },\n    showItem (item) {\n      this.item = item\n      this.isModalActive = true\n    },\n    getData () {\n      this.$store.dispatch('loaded', false)\n      axios.post('/sales/sort', {\n        find: {\n          // delivery_date: { $gte: moment().subtract(1, 'day') }\n        },\n        sort: { created: 1 }\n      }).then(res => {\n        this.data = []\n        if (res.data.length) {\n          let grouped = this.$root.groupBy(res.data, 'delivery_date')\n          Object.keys(grouped).forEach(i => {\n            let row = grouped[i]\n            this.data.push({\n              date: i,\n              formatted_date: moment(i).format('DMMM YYYY').toUpperCase(),\n              sales: row,\n              total_deliveries: row.length\n            })\n          })\n          this.showPartial(this.data.length - 1)\n        }\n        this.$store.dispatch('loaded', true)\n      })\n    },\n    drawMap () {\n      mapboxgl.accessToken = this.$root.accessToken\n      var map = new mapboxgl.Map({\n        container: 'map',\n        style: 'mapbox://styles/mapbox/streets-v11',\n        center: [this.partial.sales[0].customer.geo.lng, this.partial.sales[0].customer.geo.lat],\n        // interactive: false,\n        zoom: 14\n      })\n\n      let features = []\n      let coordinates = []\n\n      this.partial.sales.forEach(e => {\n        if (e.customer && e.customer.geo && e.customer.geo.lng && e.customer.geo.lat) {\n          let coordinate = [e.customer.geo.lng, e.customer.geo.lat]\n          // let time = moment(e.created).utcOffset(-3).format('YYYY-MM-DD HH:mm')\n          coordinates.push(coordinate)\n          let deliveryCode = e.delivery_code || '?'\n          features.push({\n            'type': 'Feature',\n            'properties': {\n              '_id': e._id,\n              'title': ['#' + e.id, e.delivery_code].join(' - '),\n              // 'title': window.delivery_codes[e._id],\n              // 'description': ['#' + e.id, time, '$' + e.total, e.customer.fullname, e.customer.phone, e.customer.geo.formatted_address, e.customer.comments].join('<br>'),\n              'description': [`<h6 class=\"subtitle has-text-weight-bold is-marginless\">Código de Entrega</h6>`, `<p>Zona y prioridad ej. A1, C5, etc</p>`, `<div class=\"field has-addons\"><div class=\"control\"><input class=\"input\" type=\"text\" id=\"${e._id}\" value=\"${deliveryCode}\"></div><div class=\"control\"><input class=\"button is-info\" type=\"button\" onclick=\"set_delivery_code('${e._id}')\" value=\"OK\"></div></div>`].join(''),\n              'icon': 'custom-marker'\n            },\n            'geometry': {\n              'type': 'Point',\n              'coordinates': coordinate\n            }\n          })\n        }\n      })\n\n      map.on('load', () => {\n        map.loadImage('/img/custom_marker.png', (error, image) => {\n          if (error) throw error\n          map.addImage('custom-marker', image)\n          map.addSource('markers', {\n            'type': 'geojson',\n            'data': {\n              'type': 'FeatureCollection',\n              'features': features\n            }\n          })\n          map.addLayer({\n            'id': 'points',\n            'type': 'symbol',\n            'source': 'markers',\n            'layout': {\n              'icon-image': 'custom-marker',\n              'icon-size': 1,\n              'text-field': ['get', 'title'],\n              'text-font': [\n                'Open Sans Semibold',\n                'Arial Unicode MS Bold'\n              ],\n              'text-offset': [0, 0.25],\n              'text-anchor': 'top'\n            }\n          })\n        })\n\n        map.on('click', 'points', function (e) {\n          var coordinates = e.features[0].geometry.coordinates.slice()\n          var description = e.features[0].properties.description\n          var _id = e.features[0].properties._id\n\n          while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360\n          }\n\n          new mapboxgl.Popup()\n            .setLngLat(coordinates)\n            .setHTML(description)\n            .addTo(map)\n\n          setTimeout(() => {\n            document.getElementById(_id).select()\n          }, 100)\n        })\n\n        map.on('mouseenter', 'points', function () {\n          map.getCanvas().style.cursor = 'pointer'\n        })\n\n        map.on('mouseleave', 'points', function () {\n          map.getCanvas().style.cursor = ''\n        })\n\n        var bounds = coordinates.reduce((e, i) => {\n          return e.extend(i)\n        }, new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]))\n        if (coordinates.length > 1) {\n          map.fitBounds(bounds, {\n            padding: 100,\n            offset: [0, 0]\n          })\n        }\n      })\n\n      this.features = features\n      this.map = map\n    },\n    trashModal (trashObject) {\n      this.trashObject = trashObject\n      this.isModalActive = true\n    },\n    trashConfirm () {\n      this.isLoading = true\n      this.isModalActive = false\n      axios\n        .post(['upload', 'delete'].join('/'), {\n          files: [this.trashObject.src]\n        }).then(res => {\n          this.isLoading = false\n          this.$emit('fileDeleted', res.data)\n        })\n    },\n    trashCancel () {\n      this.isModalActive = false\n    }\n  }\n}\n</script>\n\n<style>\n  #map {\n    width: 100%;\n    height: 500px;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Delivery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Delivery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Delivery.vue?vue&type=template&id=4c9ee19f&\"\nimport script from \"./Delivery.vue?vue&type=script&lang=js&\"\nexport * from \"./Delivery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Delivery.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}
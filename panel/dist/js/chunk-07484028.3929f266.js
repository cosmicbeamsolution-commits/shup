(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07484028"],{"1e1d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section is-title-bar"},[a("div",{staticClass:"level is-flex-start"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("ul",t._l(t.titleStack,(function(e,i){return a("li",{key:i},[t._v(t._s(e))])})),0)])]),t.callAction?a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("div",{staticClass:"buttons is-right"},[a("router-link",{staticClass:"button is-danger",attrs:{to:t.callAction.link}},[a("b-icon",{attrs:{icon:t.callAction.icon,"custom-size":"default"}}),a("span",[t._v(t._s(t.callAction.title))])],1)],1)])]):t._e()])])},s=[],o={name:"TitleBar",props:{titleStack:{type:Array,default:function(){return[]}},callAction:{type:Object,default:function(){}}}},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=l.exports},"2b9d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isDismissed?t._e():a("div",{staticClass:"notification"},[t.dismissable?a("button",{staticClass:"delete",on:{click:t.dismiss}}):t._e(),a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t._t("default")],2)]),t.action?a("div",{staticClass:"level-right level-right-padded"},[a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-small is-white",attrs:{type:"button"}},[t._v(t._s(t.action.name))])])]):t._e()])])},s=[],o={name:"Notification",props:{dismissable:{type:Boolean,default:!0},action:{type:Object,default:function(){}}},data:function(){return{isDismissed:!1}},methods:{dismiss:function(){this.isDismissed=!0}}},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=l.exports},b57f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-bar"),a("aside-menu"),a("title-bar",{attrs:{"title-stack":t.titleStack,"call-action":t.callAction}}),a("hero-bar",[a("b-icon",{attrs:{icon:"circle-edit-outline",size:"is-large"}}),t._v(" "+t._s(t.heroTitle)+" "),a("router-link",{staticClass:"button ",attrs:{slot:"right",to:t.heroRouterLinkTo},slot:"right"},[t._v(" "+t._s(t.heroRouterLinkLabel)+" ")])],1),a("section",{staticClass:"section is-main-section"},[a("notification",{directives:[{name:"show",rawName:"v-show",value:t.$route.params.sid,expression:"$route.params.sid"}],staticClass:"is-info"},[a("div",[a("span",[t._v("Estás editando una entrada en "),a("strong",{domProps:{innerHTML:t._s(t.cat)}})])])]),a("card-component",{staticClass:"tile is-child",attrs:{title:t.formCardTitle,icon:"circle-edit-outline"}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("b-field",{attrs:{label:"Visible",horizontal:""}},[a("b-switch",{model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}})],1),a("hr"),a("b-field",{attrs:{label:"Nombre",message:"Nombre de la entrada",horizontal:""}},[a("b-input",{attrs:{placeholder:"Así empezó nuestro proyecto",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("b-field",{attrs:{label:"URL",message:"URL: sin barra, espacios, tildes ni símbolos.",horizontal:""}},[a("b-input",{attrs:{placeholder:"/asi-empezo",required:""},model:{value:t.form.slug,callback:function(e){t.$set(t.form,"slug",e)},expression:"form.slug"}})],1),a("b-field",{attrs:{label:"",horizontal:""}},[a("a",{attrs:{href:"https://yacabron.com/blog"+t.cat_slug+"/"+t.form.slug,target:"_blank"}},[a("span",{domProps:{innerHTML:t._s("https://yacabron.com/blog/"+t.cat_slug+"/"+t.form.slug)}})])]),a("b-field",{attrs:{label:"Descripción",message:"Describí brevemente la entrada de blog",horizontal:""}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.text,expression:"form.text"}],staticClass:"textarea",attrs:{placeholder:"Descripción de la entrada"},domProps:{value:t.form.text},on:{input:function(e){e.target.composing||t.$set(t.form,"text",e.target.value)}}})]),a("vue-editor",{attrs:{id:"editor",useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),a("hr"),a("b-field",{attrs:{label:"Fondo",horizontal:""}},[a("b-field",{attrs:{label:""}},[a("file-picker",{on:{fileUploaded:t.handleFileUploaded}})],1),a("b-field",{attrs:{label:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.photo,expression:"form.photo"}],staticClass:"box"},[a("img",{style:t.form.filtro,attrs:{src:t.form.photo}})])])],1),a("b-field",{directives:[{name:"show",rawName:"v-show",value:t.form.photo,expression:"form.photo"}],attrs:{horizontal:""}},[a("b-field",{attrs:{label:"Filtro"}}),a("b-field",{attrs:{label:"",horizontal:""}},[a("b-select",{attrs:{placeholder:"Elegí un filtro para realzar tu foto"},model:{value:t.form.filtro,callback:function(e){t.$set(t.form,"filtro",e)},expression:"form.filtro"}},[a("option",{attrs:{value:""}},[t._v("Ninguno")]),t._l(t.filters,(function(e,i){return a("option",{key:i,domProps:{value:e.filter}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1)],1),a("hr"),a("b-field",{attrs:{horizontal:""}},[a("b-button",{attrs:{type:"is-primary",loading:t.isLoading,"native-type":"submit"}},[t._v("Guardar")])],1)],1)])],1)],1)},s=[],o=(a("a15b"),a("b0c0"),a("d3b7"),a("25f0"),a("ddb0"),a("bc3a")),r=a.n(o),n=a("c1df"),l=a.n(n),c=a("d000"),u=a("25f7"),d=a("1e1d"),m=a("503b"),f=a("6df7"),b=a("3b73"),p=a("5873"),h=a("2b9d"),g={name:"BlogSubForm",components:{NavBar:c["a"],AsideMenu:u["a"],CardComponent:f["a"],HeroBar:m["a"],TitleBar:d["a"],Notification:h["a"],FilePicker:b["a"],VueEditor:p["a"]},props:{id:{default:null}},data:function(){return{customElementsForm:{checkbox:[],radio:null,switch:!0,file:null},filters:[],isLoading:!1,htmlForEditor:"",cat:null,cat_slug:null,form:this.getClearFormObject(),createdReadable:null,isProfileExists:!1}},computed:{callAction:function(){return{link:"/blog",icon:"circle-edit-outline",title:"Blog"}},titleStack:function(){var t;return t=this.isProfileExists?this.form.name:"Nueva Localidad",["Gestor","Blog",this.cat,t]},heroTitle:function(){return this.isProfileExists?this.form.name:"Nueva Entrada"},heroRouterLinkTo:function(){return this.isProfileExists,"/blog/"+this.$route.params.id},heroRouterLinkLabel:function(){return this.isProfileExists,this.cat},formCardTitle:function(){return this.isProfileExists?"Editar Entrada":"Nueva Entrada"}},created:function(){this.getData()},methods:{handleFileUploaded:function(t){this.form.photo=t[0]},handleImageAdded:function(t,e,a,i){var s=new FormData;s.append("files",t),r()({url:"/upload/multi",method:"POST",data:s}).then((function(t){e.insertEmbed(a,"image",t.data[0]),i()})).catch((function(t){console.log(t)}))},getClearFormObject:function(){return{_id:null,name:null,slug:null,active:!0,created:new Date}},getData:function(){var t=this;this.$route.params.sid&&("new"!==this.$route.params.sid?r.a.get(["blog",this.$route.params.id,"entries",this.$route.params.sid].join("/")).then((function(e){var a=e.data.entries;a?(t.isProfileExists=!0,t.form=a,t.cat=e.data.name,t.cat_slug=e.data.slug):t.$router.push({name:"subblog.new"})})).catch((function(e){t.$buefy.toast.open({message:"Error: ".concat(e.message),type:"is-danger",queue:!1})})):r.a.get(["blog",this.$route.params.id].join("/")).then((function(e){var a=e.data;t.isProfileExists=!1,a?(t.cat=a.name,t.cat_slug=a.slug):t.$router.push({name:"subblog.new"})})).catch((function(e){t.$buefy.toast.open({message:"Error: ".concat(e.message),type:"is-danger",queue:!1})}))),r.a.get("/filters").then((function(e){t.filters=e.data}))},input:function(t){this.createdReadable=l()(t).format("MMM D, Y").toString()},submit:function(){var t=this;this.isLoading=!0,setTimeout((function(){t.isLoading=!1,"new"!==t.$route.params.sid?r.a.post(["blog",t.$route.params.id,"entries",t.$route.params.sid].join("/"),t.form).then((function(e){e.data&&(t.$buefy.snackbar.open({message:"Entrada actualizada",queue:!1}),t.$router.push({name:"blog.edit",id:t.$route.params.id}))})).catch((function(e){t.$buefy.toast.open({message:"Error: ".concat(e.message),type:"is-danger",queue:!1})})):r.a.put(["blog",t.$route.params.id,"entries"].join("/"),t.form).then((function(e){e.data&&(t.$buefy.snackbar.open({message:"Entrada agregada",queue:!1}),t.$router.push({name:"blog.edit",id:t.$route.params.id}))})).catch((function(e){t.$buefy.toast.open({message:"Error: ".concat(e.message),type:"is-danger",queue:!1})}))}),500)}},watch:{id:function(t){this.isProfileExists=!1,t?this.getData():this.form=this.getClearFormObject()}}},v=g,_=a("2877"),$=Object(_["a"])(v,i,s,!1,null,null,null);e["default"]=$.exports}}]);
//# sourceMappingURL=chunk-07484028.3929f266.js.map
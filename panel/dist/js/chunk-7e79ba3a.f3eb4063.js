(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e79ba3a"],{"0fa5":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("nav-bar"),o("aside-menu"),o("hero-bar",[o("b-icon",{attrs:{icon:"shopping",size:"is-medium"}}),e._v(" Tienda ")],1),o("section",{staticClass:"section is-main-section"},[o("card-component",[o("form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[o("div",{staticClass:"tabs is-centered is-boxed"},[o("ul",[o("li",{class:{"is-active":"texts"===e.tab}},[o("a",{on:{click:function(t){e.tab="texts"}}},[o("span",[e._v("Perfil")])])]),o("li",{class:{"is-active":"type"===e.tab}},[o("a",{on:{click:function(t){e.tab="type"}}},[o("span",[e._v("Tipo")])])]),o("li",{class:{"is-active":"stock"===e.tab}},[o("a",{on:{click:function(t){e.tab="stock"}}},[o("span",[e._v("Catálogo")])])]),o("li",{class:{"is-active":"about"===e.tab}},[o("a",{on:{click:function(t){e.tab="about"}}},[o("span",[e._v("Info")])])]),o("li",{class:{"is-active":"scope"===e.tab}},[o("a",{on:{click:function(t){e.tab="scope"}}},[o("span",[e._v("Envíos")])])]),o("li",{class:{"is-active":"payments"===e.tab}},[o("a",{on:{click:function(t){e.tab="payments"}}},[o("span",[e._v("Cobros")])])]),o("li",{class:{"is-active":"promos"===e.tab}},[o("a",{on:{click:function(t){e.tab="promos"}}},[o("span",[e._v("Promos")])])])])]),o("div",{directives:[{name:"show",rawName:"v-show",value:"texts"===e.tab,expression:"tab === 'texts'"}]},[o("label",{staticClass:"label"},[e._v("Establecé la información de tu tienda")]),o("p",[e._v("El nombre y la información básica de tu tienda, resumí en pocas palabras de que se trata tu tienda.")]),o("hr"),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:"Nombre de tu geotienda"}},[o("b-input",{attrs:{placeholder:"Delicias del Sur",required:""},model:{value:e.form.shop,callback:function(t){e.$set(e.form,"shop",t)},expression:"form.shop"}})],1),o("b-field",{attrs:{label:"Describí brevemente de qué se trata tu geotienda"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.text,expression:"form.text"}],staticClass:"textarea is-rows-condensed",attrs:{placeholder:"Comida gourmet con productos regionales, la mejor atención...",required:""},domProps:{value:e.form.text},on:{keyup:e.checkShopText,input:function(t){t.target.composing||e.$set(e.form,"text",t.target.value)}}})])],1),o("div",{staticClass:"column"},[o("section",{staticClass:"profile-faker"},[o("file-picker",{staticClass:"logo",style:"background-image:url('"+e.form.logo+"')",on:{fileUploaded:e.handleLogoUploaded}}),o("file-picker",{ref:"backgroundPicker",staticClass:"background",style:"background-image:url('"+e.form.background+"')",on:{fileUploaded:e.handleBackgroundUploaded}})],1)])]),o("p",[o("a",{attrs:{href:"https://overlemon.com/guia/perfil",target:"_blank"}},[o("b-icon",{attrs:{icon:"book-information-variant"}}),e._v(" Saber más acerca de info de la tienda")],1)])]),o("div",{directives:[{name:"show",rawName:"v-show",value:"stock"===e.tab,expression:"tab === 'stock'"}],staticClass:"content"},[o("label",{staticClass:"label"},[e._v("Establecé la orientación de las tarjetas")]),o("p",[e._v("Si ofrecés productos como ropa ó lámparas tal vez necesites activar la orientación retrato. Para el resto de los productos la orientación paisaje puede resultar la mejor opción.")]),o("hr"),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("div",{staticClass:"buttons has-addons is-flex-center"},[o("button",{staticClass:"button  is-light",class:{"is-success":"landscape"===e.form.item_layout||!e.form.item_layout},attrs:{type:"button"},on:{click:function(t){e.form.item_layout="landscape"}}},[e._v("Paisaje")]),o("button",{staticClass:"button  is-light",class:{"is-success":"portrait"===e.form.item_layout},attrs:{type:"button"},on:{click:function(t){e.form.item_layout="portrait"}}},[e._v("Retrato")])])]),o("div",{staticClass:"column is-narrow"},[o("div",{staticClass:"item-layout",class:e.form.item_layout})])]),o("p",[o("a",{attrs:{href:"https://overlemon.com/guia/orientacion-tarjeta",target:"_blank"}},[o("b-icon",{attrs:{icon:"book-information-variant"}}),e._v(" Saber más acerca orientación de tarjeta")],1)])]),o("div",{directives:[{name:"show",rawName:"v-show",value:"type"===e.tab,expression:"tab === 'type'"}],staticClass:"content"},[o("label",{staticClass:"label"},[e._v("Establecé el tipo de tu tienda")]),o("p",[e._v("Si ofrecés productos deberás establecer la geolocalización y los costos de envío. Si ofrecés servicios no necesitarás establecer los precios de antemano ya que podrás cotizarlo de acuerdo a las necesidades. Los servicios tampoco necesitan de costos de envío. ")]),o("hr"),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("div",{staticClass:"buttons has-addons is-flex-center"},[o("button",{staticClass:"button  is-light",class:{"is-success":"products"===e.form.type||!e.form.type},attrs:{type:"button"},on:{click:function(t){e.form.type="products"}}},[e._v("Productos")]),o("button",{staticClass:"button  is-light",class:{"is-success":"services"===e.form.type},attrs:{type:"button"},on:{click:function(t){e.form.type="services"}}},[e._v("Servicios")])])])]),o("p",[o("a",{attrs:{href:"https://overlemon.com/guia/tipo",target:"_blank"}},[o("b-icon",{attrs:{icon:"book-information-variant"}}),e._v(" Saber más acerca de tipo de la tienda")],1)])]),o("div",{directives:[{name:"show",rawName:"v-show",value:"about"===e.tab,expression:"tab === 'about'"}],staticClass:"content"},[o("label",{staticClass:"label"},[e._v("Agregá información adicional de tu tienda")]),o("p",[e._v("Si querés obtener ventas confiables es importante que tus clientes sepan quien sos antes de conocerte, este espacio está orientado a que desarrolles de que se trata tu tienda.")]),o("hr"),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:"Acerca de mi tienda"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.about,expression:"form.about"}],staticClass:"textarea is-rows-expanded",attrs:{placeholder:"Información complementaria de tu tienda"},domProps:{value:e.form.about},on:{input:function(t){t.target.composing||e.$set(e.form,"about",t.target.value)}}})]),o("hr"),o("b-field",{attrs:{label:"Mensaje importante de tu tienda"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.about_important,expression:"form.about_important"}],staticClass:"textarea is-rows-condensed",attrs:{placeholder:"Realizamos los envíos los días lunes sin excepción"},domProps:{value:e.form.about_important},on:{input:function(t){t.target.composing||e.$set(e.form,"about_important",t.target.value)}}})])],1),o("div",{staticClass:"column"},[o("label",{staticClass:"label"},[e._v("Imagen de mi tienda")]),o("section",{staticClass:"profile-faker"},[o("file-picker",{staticClass:"about",style:"background-image:url('"+e.form.about_photo+"')",on:{fileUploaded:e.handleAboutPhotoUploaded}})],1)])]),o("p",[o("a",{attrs:{href:"https://overlemon.com/guia/info",target:"_blank"}},[o("b-icon",{attrs:{icon:"book-information-variant"}}),e._v(" Saber más acerca de info adicional de la tienda")],1)])]),o("div",{directives:[{name:"show",rawName:"v-show",value:"scope"===e.tab,expression:"tab === 'scope'"}],staticClass:"content"},[o("label",{staticClass:"label"},[e._v("Establecé el área de cobertura de tus envíos")]),o("p",[e._v("Si ofrecés productos como ropa ó lámparas tal vez necesites activar la orientación retrato. Para el resto de los productos la orientación paisaje puede resultar la mejor opción.")]),o("hr"),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("div",{staticClass:"buttons has-addons is-flex-center"},[o("button",{staticClass:"button  is-light",class:{"is-success":"country"===e.form.scope||!e.form.scope},attrs:{type:"button"},on:{click:function(t){return e.setShopScope("country")}}},[e._v("Todo el país")]),o("button",{staticClass:"button  is-light",class:{"is-success":"custom"===e.form.scope},attrs:{type:"button"},on:{click:function(t){return e.setShopScope("custom")}}},[e._v("Localizado")])]),o("b-field",{attrs:{label:"¿Dónde está ubicada tu geotienda?"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.address,expression:"form.address"}],staticClass:"input ",attrs:{type:"text",id:"address",placeholder:"Dirección de tu geotienda",required:""},domProps:{value:e.form.address},on:{input:function(t){t.target.composing||e.$set(e.form,"address",t.target.value)}}})]),o("b-field",{attrs:{label:"¿Alguna indicación más sobre la dirección?"}},[o("b-input",{attrs:{type:"text",placeholder:"Piso, torre, departamento, ..."},model:{value:e.form.address_extra,callback:function(t){e.$set(e.form,"address_extra",t)},expression:"form.address_extra"}})],1),"products"===e.form.type?o("div",{staticClass:"field"},[o("b-field",[o("b-field",{attrs:{label:"Costo de envío (ARS)"}},[o("b-numberinput",{attrs:{"controls-position":"compact","controls-rounded":""},on:{input:e.previewDeliveryCost},model:{value:e.form.cost_delivery_base,callback:function(t){e.$set(e.form,"cost_delivery_base",t)},expression:"form.cost_delivery_base"}})],1)],1),"country"===e.form.scope?o("b-field",[o("b-field",{attrs:{label:"Adicional por km (ARS)"}},[o("b-numberinput",{attrs:{step:"0.01","controls-position":"compact","controls-rounded":""},on:{input:e.previewDeliveryCost},model:{value:e.form.cost_delivery_km,callback:function(t){e.$set(e.form,"cost_delivery_km",t)},expression:"form.cost_delivery_km"}})],1)],1):e._e(),o("p",{directives:[{name:"show",rawName:"v-show",value:"country"===e.form.scope,expression:"form.scope === 'country'"}]},[e._v("Completá la formula de cálculo de costo de envío y previsualizá costos dibujando segmentos en el mapa. Podés hacer click en un punto para borrarlo.")]),o("p",{directives:[{name:"show",rawName:"v-show",value:"custom"===e.form.scope,expression:"form.scope === 'custom'"}]},[e._v("Dibujá un rectángulo en el mapa haciendo click dos veces para establecer el área de cobertura.")])],1):e._e(),o("div",{directives:[{name:"show",rawName:"v-show",value:"country"===e.form.scope&&"products"===e.form.type,expression:"form.scope === 'country' && form.type === 'products'"}],staticClass:"map",attrs:{id:"map_country"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:"custom"===e.form.scope,expression:"form.scope === 'custom'"}],staticClass:"map",attrs:{id:"map_custom"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:"country"===e.form.scope&&e.mapDistance,expression:"form.scope === 'country' && mapDistance"}],staticClass:"notification is-info"},[o("p",[e._v("Distancia: "+e._s(e.mapDistance)+" km")]),o("p",{directives:[{name:"show",rawName:"v-show",value:e.form.cost_delivery_base&&e.form.cost_delivery_km,expression:"form.cost_delivery_base && form.cost_delivery_km"}]},[e._v("Costo de envío "+e._s(e.mapDeliveryCost)+" ARS")])])],1)]),o("p",[o("a",{attrs:{href:"https://overlemon.com/guia/envios",target:"_blank"}},[o("b-icon",{attrs:{icon:"book-information-variant"}}),e._v(" Saber más acerca de envíos de la tienda")],1)])]),o("div",{directives:[{name:"show",rawName:"v-show",value:"promos"===e.tab,expression:"tab === 'promos'"}]},[o("label",{staticClass:"label"},[e._v("Establecé promos de tus productos")]),o("p",[e._v("Si ofrecés productos podés armar combos y promociones. Por cada x de Producto A obtenés x de Producto B.")]),o("hr"),o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-narrow"},[e.form.hasOwnProperty("promos")&&Object.keys(e.form.promos).length?o("div",e._l(e.form.promos,(function(t,a){return o("div",{key:a,staticClass:"field"},[o("div",{staticClass:"notification is-info"},[o("div",{staticClass:"level"},[t?o("div",{staticClass:"level-item level-left"},[o("p",[e._v("Por cada venta de "),o("strong",[e._v(e._s(t.itemFrom.name))]),e._v(" se ofrece "),o("strong",[e._v(e._s(t.quantity))]),e._v(" "),o("strong",[e._v(e._s(t.itemTo.name))]),e._v(" sin cargo")])]):e._e(),o("div",{staticClass:"level-item level-right level-right-padded"},[o("b-button",{attrs:{type:"is-white is-small"},on:{click:function(o){return e.delPromo(t)}}},[e._v("Eliminar")])],1)])])])})),0):o("div",{staticClass:"field content"},[o("div",{staticClass:"notification is-light has-text-white"},[o("h5",{staticClass:"has-text-dark"},[e._v("No hay promociones establecidas.")]),o("p",{staticClass:"has-text-dark"},[e._v("Creá una seleccionando categoría, producto y cantidad. Al finalizar presioná Guardar.")])])]),e.promos.itemFrom&&e.promos.itemTo&&e.promos.quantity?o("div",{staticClass:"field"},[o("div",{staticClass:"notification is-success"},[o("div",{staticClass:"level"},[o("div",{staticClass:"level-item level-left"},[o("p",[e._v("Por cada venta de "),o("strong",[e._v(e._s(e.promos.itemFrom[0].name))]),e._v(" se ofrece "),o("strong",[e._v(e._s(e.promos.quantity))]),e._v(" "),o("strong",[e._v(e._s(e.promos.itemTo[0].name))]),e._v(" sin cargo")])]),o("div",{staticClass:"level-item level-right level-right-padded"},[o("b-button",{attrs:{type:"is-white is-small"},on:{click:e.addPromo}},[e._v("Agregar")])],1)])])]):e._e(),o("table",{staticClass:"table"},[o("tr",[o("th",[e._v("Stock")]),o("th",[e._v("Producto")]),o("th",[e._v("Cantidad")])]),o("tr",[o("td",[o("b-select",{attrs:{multiple:"","native-size":"8"},model:{value:e.promos.itemFrom,callback:function(t){e.$set(e.promos,"itemFrom",t)},expression:"promos.itemFrom"}},e._l(e.basic.items,(function(t,a){return o("option",{key:a,domProps:{value:t}},[e._v(e._s(t.name))])})),0)],1),o("td",[o("b-select",{attrs:{multiple:"","native-size":"8"},model:{value:e.promos.itemTo,callback:function(t){e.$set(e.promos,"itemTo",t)},expression:"promos.itemTo"}},e._l(e.basic.items,(function(t,a){return o("option",{key:a,domProps:{value:t}},[e._v(e._s(t.name))])})),0)],1),o("td",[o("b-numberinput",{attrs:{min:"0",max:"9999","controls-position":"compact","controls-rounded":""},model:{value:e.promos.quantity,callback:function(t){e.$set(e.promos,"quantity",t)},expression:"promos.quantity"}})],1)])])])]),o("p",[o("a",{attrs:{href:"https://overlemon.com/guia/promos",target:"_blank"}},[o("b-icon",{attrs:{icon:"book-information-variant"}}),e._v(" Saber más acerca de promociones")],1)])]),o("div",{directives:[{name:"show",rawName:"v-show",value:"payments"===e.tab,expression:"tab === 'payments'"}]},[o("label",{staticClass:"label"},[e._v("Establecé cómo querés cobrar en tu tienda")]),o("p",[e._v("Te ofrecemos las alternativas mas usadas hoy de venta electrónica. Si tu forma de cobro no está en la lista "),o("a",{attrs:{href:"https://overlemon.com/contacto",target:"_blank"}},[e._v("háznoslo saber")]),e._v(", tal vez la podamos agregar! ")]),o("hr"),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{staticClass:"has-check",attrs:{label:"Métodos de pago"}},[o("checkbox-picker",{attrs:{options:{takeaway:"Retiro en sucursal",cash:"Envío a domicilio",bank:"CBU o ALIAS",mercadopago:"Mercado Pago"},type:"is-primary"},model:{value:e.payment_methods,callback:function(t){e.payment_methods=t},expression:"payment_methods"}})],1)],1),o("div",{staticClass:"column is-narrow"},[o("b-field",{attrs:{message:"Precio compra mínima"}},[o("b-numberinput",{attrs:{"controls-position":"compact","controls-rounded":""},model:{value:e.form.min_price,callback:function(t){e.$set(e.form,"min_price",t)},expression:"form.min_price"}})],1)],1)]),o("hr",{directives:[{name:"show",rawName:"v-show",value:e.payment_methods.includes("bank"),expression:"payment_methods.includes('bank')"}]}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.payment_methods.includes("bank"),expression:"payment_methods.includes('bank')"}],staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:"CBU",message:"Establece el CBU"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.bank_cbu,expression:"form.bank_cbu"}],staticClass:"input ",class:{"is-success":e.checkCBUFormat,"is-danger":!e.checkCBUFormat},attrs:{type:"text",placeholder:"0720168088000036018000"},domProps:{value:e.form.bank_cbu},on:{input:function(t){t.target.composing||e.$set(e.form,"bank_cbu",t.target.value)}}})]),o("b-field",{attrs:{label:"Entidad bancaria",message:"Opcional"}},[o("b-input",{attrs:{placeholder:"Banco Santander"},model:{value:e.form.bank_entity,callback:function(t){e.$set(e.form,"bank_entity",t)},expression:"form.bank_entity"}})],1),o("b-field",{attrs:{label:"Titular de la cuenta",message:"Opcional"}},[o("b-input",{attrs:{placeholder:"Juan Manuel Rodríguez"},model:{value:e.form.bank_owner,callback:function(t){e.$set(e.form,"bank_owner",t)},expression:"form.bank_owner"}})],1)],1),o("div",{staticClass:"column"},[o("b-field",{attrs:{label:"Alias de la cuenta",message:"Opcional"}},[o("b-input",{attrs:{placeholder:"JUAN.MANUEL.RODRIGUEZ"},model:{value:e.form.bank_alias,callback:function(t){e.$set(e.form,"bank_alias",t)},expression:"form.bank_alias"}})],1),o("b-field",{attrs:{label:"Número de la cuenta",message:"Opcional"}},[o("b-input",{attrs:{placeholder:"000-360187/3"},model:{value:e.form.bank_account,callback:function(t){e.$set(e.form,"bank_account",t)},expression:"form.bank_account"}})],1)],1)]),o("hr",{directives:[{name:"show",rawName:"v-show",value:e.payment_methods.includes("mercadopago"),expression:"payment_methods.includes('mercadopago')"}]}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.payment_methods.includes("mercadopago"),expression:"payment_methods.includes('mercadopago')"}],staticClass:"columns"},[o("div",{staticClass:"column"},[o("b-field",{attrs:{label:"Mercado Pago",message:"Ingresá el access token de tu app en Mercado Pago"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.mp_access_token,expression:"form.mp_access_token"}],staticClass:"input ",class:{"is-success":e.checkMpAccessTokenFormat,"is-danger":!e.checkMpAccessTokenFormat},attrs:{type:"text",placeholder:"APP_USR-3233559644412004-102816-8ef374b8cca647798ecd4b60fd8894e2-000000000"},domProps:{value:e.form.mp_access_token},on:{input:function(t){t.target.composing||e.$set(e.form,"mp_access_token",t.target.value)}}})])],1)]),o("hr"),o("div",{staticClass:"columns"},[o("div",{staticClass:"column"},[o("label",{staticClass:"label"},[e._v("Texto después del pago")]),o("vue-editor",{attrs:{id:"editor",useCustomImageHandler:""},on:{"image-added":e.handleImageAdded},model:{value:e.form.payment_text,callback:function(t){e.$set(e.form,"payment_text",t)},expression:"form.payment_text"}})],1)]),o("p",[o("a",{attrs:{href:"https://overlemon.com/guia/pagos",target:"_blank"}},[o("b-icon",{attrs:{icon:"book-information-variant"}}),e._v(" Saber más acerca de pagos de la tienda")],1)])]),o("hr"),o("div",{staticClass:"buttons is-flex-end"},[o("b-button",{attrs:{type:"is-primary",loading:e.saving,"native-type":"submit"}},[e._v("Guardar")])],1)])])],1)],1)},s=[],i=(o("a4d3"),o("4de4"),o("4160"),o("caad"),o("d81d"),o("13d5"),o("b0c0"),o("e439"),o("dbb4"),o("b64b"),o("acd8"),o("e25e"),o("ac1f"),o("2532"),o("5319"),o("159b"),o("d4ec")),r=o("bee2"),n=o("ade3"),c=o("2f62"),l=o("bc3a"),m=o.n(l),d=o("d000"),u=o("25f7"),p=o("6df7"),f=o("503b"),v=o("44be"),b=o("e192"),h=o.n(b),_=o("6ee6"),g=o("b106"),y=o.n(g),k=o("3b73"),C=o("5873");function w(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?w(Object(o),!0).forEach((function(t){Object(n["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var P={name:"Shop",components:{NavBar:d["a"],AsideMenu:u["a"],HeroBar:f["a"],CardComponent:p["a"],CheckboxPicker:v["a"],FilePicker:k["a"],VueEditor:C["a"]},data:function(){return{tab:"texts",saving:!1,payment_methods:[],form:{},shopTextLength:0,costDeliveryBase:350,costDeliveryKm:.75,mapCenter:[-65.368325,-36.879621],mapZoom:3,mapToken:this.$root.accessToken,distance:0,mapDistance:0,mapDeliveryCost:0,mapCountryLoaded:!1,mapCustomLoaded:!1,mapAutocompleteLoaded:!1,bankCbuRe:/^[0-9]{22}$/,mpAccessTokenRe:/^APP_USR-[0-9]{16}-[0-9]{6}-(\w){32}-[0-9]{9}$/,promos:{itemFrom:[],itemTo:[],quantity:0}}},computed:x({},Object(c["b"])(["basic","shop"]),{checkCBUFormat:function(){return this.bankCbuRe.test(this.form.bank_cbu)||this.form.bank_alias&&this.form.bank_alias.length>5},checkMpAccessTokenFormat:function(){return this.mpAccessTokenRe.test(this.form.mp_access_token)}}),created:function(){this.shop&&(this.form=this.shop,this.form.payment_methods&&(this.payment_methods=this.form.payment_methods),this.shop.text&&(this.shopTextLength=this.shop.text.length),this.form.item_layout||(this.form.item_layout="landscape"),this.form.about&&(this.form.about=this.form.about.replace(/(<([^>]+)>)/gi,"")))},methods:{handleImageAdded:function(e,t,o,a){var s=new FormData;s.append("files",e),m()({url:"/upload/multi",method:"POST",data:s}).then((function(e){t.insertEmbed(o,"image",e.data[0]),a()})).catch((function(e){console.log(e)}))},handleLogoUploaded:function(e){this.$set(this.form,"logo",e[0])},handleBackgroundUploaded:function(e){this.$set(this.form,"background",e[0])},handleAboutPhotoUploaded:function(e){this.$set(this.form,"about_photo",e[0])},checkScopeMaps:function(){var e=this;this.form.cost_delivery_base||(this.form.cost_delivery_base=this.costDeliveryBase),"products"===this.form.type&&(this.form.cost_delivery_km||(this.form.cost_delivery_km=this.costDeliveryKm)),this.mapAutocompleteLoaded||this.initAutocomplete("address"),setTimeout((function(){"products"===e.form.type&&"country"===e.form.scope&&(e.mapCountryLoaded||e.drawCountryMap()),"custom"===e.form.scope&&(e.mapCustomLoaded||e.drawCustomMap())}),1e3)},previewDeliveryCost:function(){this.form.cost_delivery_base&&this.form.cost_delivery_km&&(this.mapDeliveryCost=parseInt(this.form.cost_delivery_base+this.form.cost_delivery_km*this.distance))},setShopScope:function(e){this.$set(this.form,"scope",e),this.checkScopeMaps()},checkShopText:function(){this.form.text&&(this.shopTextLength=this.form.text.length)},onlyNumeric:function(){this.form.phone&&(this.form.phone=this.form.phone.replace(/[^0-9]/g,"").replace(/^0+/,""))},addPromo:function(){var e=this,t=this.form.promos;t||(t=[]),t=t.filter((function(t){return!(t.itemFrom.id===e.promos.itemFrom[0].id&&t.itemTo.id===e.promos.itemTo[0].id)})),console.log(this.promos.itemFrom[0].name),this.promos.itemFrom[0].name&&(t.push({itemFrom:{id:this.promos.itemFrom[0]._id,name:this.promos.itemFrom[0].name},itemTo:{id:this.promos.itemTo[0]._id,name:this.promos.itemTo[0].name},quantity:this.promos.quantity}),this.$set(this.form,"promos",t),this.promos.itemFrom=[],this.promos.itemTo=[],this.promos.quantity=0)},delPromo:function(e){var t=this.form.promos;t=t.filter((function(t){return!(t.itemFrom.id===e.itemFrom.id&&t.itemTo.id===e.itemTo.id)})),this.$set(this.form,"promos",t)},initAutocomplete:function(e){var t=this,o=new window.google.maps.places.Autocomplete(document.getElementById(e),{types:["geocode"],componentRestrictions:{country:this.shop.country_iso||"ar"}});window.google.maps.event.addListener(o,"place_changed",(function(){var e=o.getPlace();t.form.address=e.formatted_address,t.form.geo={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},t.checkScopeMaps()})),this.mapAutocompleteLoaded=!0},drawCountryMap:function(){var e=this;h.a.accessToken=this.mapToken;var t=new h.a.Map({container:"map_country",style:"mapbox://styles/mapbox/streets-v11",center:this.mapCenter,zoom:this.mapZoom}),o={type:"FeatureCollection",features:[]},a={type:"Feature",geometry:{type:"LineString",coordinates:[]}};t.on("load",(function(){t.addSource("geojson",{type:"geojson",data:o}),t.addLayer({id:"measure-points",type:"circle",source:"geojson",paint:{"circle-radius":5,"circle-color":"#000"},filter:["in","$type","Point"]}),t.addLayer({id:"measure-lines",type:"line",source:"geojson",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":2.5},filter:["in","$type","LineString"]}),t.on("click",(function(s){var i=t.queryRenderedFeatures(s.point,{layers:["measure-points"]});if(o.features.length>1&&o.features.pop(),i.length){var r=i[0].properties.id;o.features=o.features.filter((function(e){return e.properties.id!==r}))}else{var n={type:"Feature",geometry:{type:"Point",coordinates:[s.lngLat.lng,s.lngLat.lat]},properties:{id:String((new Date).getTime())}};o.features.push(n)}if(o.features.length>1){a.geometry.coordinates=o.features.map((function(e){return e.geometry.coordinates})),o.features.push(a);var c=window.turf.length(a);e.mapDistance=c.toLocaleString(),e.distance=c,e.previewDeliveryCost()}t.getSource("geojson").setData(o)})),t.on("mousemove",(function(e){var o=t.queryRenderedFeatures(e.point,{layers:["measure-points"]});t.getCanvas().style.cursor=o.length?"pointer":"crosshair"}))})),this.mapCountryLoaded=!0},drawCustomMap:function(){var e=this,t=this.form.delivery_bounds,o=function(){function e(t){Object(i["a"])(this,e);var o=this;o.draw=t.draw,o.buttons=t.buttons||[],o.onAddOrig=t.draw.onAdd,o.onRemoveOrig=t.draw.onRemove}return Object(r["a"])(e,[{key:"onAdd",value:function(e){var t=this;return t.map=e,t.elContainer=t.onAddOrig(e),t.buttons.forEach((function(e){t.addButton(e)})),t.elContainer}},{key:"onRemove",value:function(e){var t=this;t.buttons.forEach((function(e){t.removeButton(e)})),t.onRemoveOrig(e)}},{key:"addButton",value:function(e){var t=this,o=document.createElement("button");o.className="mapbox-gl-draw_ctrl-draw-btn",e.classes instanceof Array&&e.classes.forEach((function(e){o.classList.add(e)})),o.addEventListener(e.on,e.action),t.elContainer.appendChild(o),e.elButton=o}},{key:"removeButton",value:function(e){e.elButton.removeEventListener(e.on,e.action),e.elButton.remove()}}]),e}();h.a.accessToken=this.mapToken;var a=this.mapCenter,s=this.mapZoom;this.form.geo&&(a=[this.form.geo.lng,this.form.geo.lat],s=10);var n=new h.a.Map({container:"map_custom",style:"mapbox://styles/mapbox/streets-v11",center:a,zoom:s}),c=_["a"].modes;c.draw_rectangle=y.a;var l=new _["a"]({displayControlsDefault:!1,controls:{trash:!0},modes:c}),m=new o({draw:l,buttons:[{on:"click",action:d,classes:["mapbox-gl-draw_polygon"]}]});function d(e){e.preventDefault(),l.changeMode("draw_rectangle")}n.addControl(m,"top-left"),n.on("load",(function(e){if(t&&Object.keys(t).length&&t.features.length){l.add(t);var o=t.features[0].geometry.coordinates[0],a=o.reduce((function(e,t){return e.extend(t)}),new h.a.LngLatBounds(o[0],o[0]));n.fitBounds(a,{padding:100,offset:[0,0]})}}));var u=function(t){var o=l.getAll();e.form.delivery_bounds=o};n.on("draw.create",u),n.on("draw.delete",u),n.on("draw.update",u),this.mapCustomLoaded=!0},submit:function(){var e=this;if(0===this.payment_methods.length)return this.$buefy.toast.open({message:"Al menos un método de pago es necesario para vender con tu geotienda. Elegí al menos uno.",type:"is-danger"});if(this.payment_methods.includes("mercadopago")&&!this.mpAccessTokenRe.test(this.form.mp_access_token))return this.$buefy.toast.open({message:"El access token de Mercado Pago ingresado es incorrecto. Debe comenzar con APP_USER-...",type:"is-danger"});if(this.payment_methods.includes("bank")){if(!this.bankCbuRe.test(this.form.bank_cbu)&&(!this.form.bank_alias||this.form.bank_alias.length<5))return this.$buefy.toast.open({message:"Para cobrar con Banco llená tu CBU o ALIAS."});if(!this.bankCbuRe.test(this.form.bank_cbu))return this.$buefy.toast.open({message:"El CBU ingresado tiene un formato incorrecto. Debe tener 22 dígitos.",type:"is-danger"})}this.saving=!0,this.form.payment_methods=this.payment_methods,this.form.cost_delivery_base&&(this.form.cost_delivery_base=parseFloat(this.form.cost_delivery_base)),this.form.cost_delivery_km&&(this.form.cost_delivery_km=parseFloat(this.form.cost_delivery_km)),this.$store.dispatch("update",this.form).then((function(t){e.saving=!1,e.$buefy.toast.open({message:"Tienda actualizada",type:"is-success",queue:!1})}))}},watch:{tab:function(e){"scope"===e&&this.checkScopeMaps()}}},S=P,A=(o("fe25"),o("2877")),T=Object(A["a"])(S,a,s,!1,null,"d8758252",null);t["default"]=T.exports},9028:function(e,t,o){},fe25:function(e,t,o){"use strict";var a=o("9028"),s=o.n(a);s.a}}]);
//# sourceMappingURL=chunk-7e79ba3a.f3eb4063.js.map
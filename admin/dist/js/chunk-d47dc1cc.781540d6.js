(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d47dc1cc"],{"2b9d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isDismissed?t._e():a("div",{staticClass:"notification"},[t.dismissable?a("button",{staticClass:"delete",on:{click:t.dismiss}}):t._e(),a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t._t("default")],2)]),t.action?a("div",{staticClass:"level-right level-right-padded"},[a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-small is-white",attrs:{type:"button"}},[t._v(t._s(t.action.name))])])]):t._e()])])},i=[],l={name:"Notification",props:{dismissable:{type:Boolean,default:!0},action:{type:Object,default:function(){}}},data:function(){return{isDismissed:!1}},methods:{dismiss:function(){this.isDismissed=!0}}},n=l,o=a("2877"),r=Object(o["a"])(n,s,i,!1,null,null,null);e["a"]=r.exports},"7e12":function(t,e,a){var s=a("da84"),i=a("58a8").trim,l=a("5899"),n=s.parseFloat,o=1/n(l+"-0")!==-1/0;t.exports=o?function(t){var e=i(String(t)),a=n(e);return 0===a&&"-"==e.charAt(0)?-0:a}:n},acd8:function(t,e,a){var s=a("23e7"),i=a("7e12");s({global:!0,forced:parseFloat!=i},{parseFloat:i})},af7c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-bar"),a("aside-menu"),a("hero-bar",[a("b-icon",{attrs:{icon:"cash-usd",size:"is-medium"}}),t._v(" Ventas "),a("div",{staticClass:"buttons",attrs:{slot:"right"},slot:"right"},[a("a",{staticClass:"button",on:{click:t.getData}},[a("span",[t._v("Actualizar")])])])],1),a("section",{staticClass:"section is-main-section"},[a("div",{staticClass:"columns"},t._l(t.data,(function(e,s){return a("div",{key:"statsKeys"+s,staticClass:"column is-clickable",on:{click:function(e){return t.showPartial(s)}}},[a("card-widget",{staticClass:"tile is-child is-clickable",class:{"is-active":t.activeIndex===s},style:t.activeIndex===s&&e.ratio_complete?"background: linear-gradient(to right,#02b875cc "+e.ratio_complete+"%,#02b875 "+e.ratio_complete+"%)":"",attrs:{type:"is-light",icon:"cash-usd",prefix:"$",number:e.total_complete,label:e.formatted_date+" $("+e.total+")"}})],1)})),0),t.partial.sales?a("card-component",[a("b-table",{staticClass:"sales-table",attrs:{data:t.partial.sales,"default-sort-direction":"desc","default-sort":"id","detail-key":"id","opened-detailed":t.defaultOpenedDetails,"row-class":t.onRowClass,detailed:"",focusable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"id",label:"#",width:"40",sortable:"",numeric:"",searchable:""}},[a("b-icon",{attrs:{icon:"toy-brick",type:"is-white",size:"is-small"}}),t._v(" "),a("span",{staticClass:"has-text-weight-bold"},[t._v(" "+t._s(e.row.id))])],1),a("b-table-column",{attrs:{field:"created",label:"Solicitado",sortable:"",searchable:""}},[a("span",{staticClass:"tag has-text-weight-bold is-uppercase",class:{"is-info":!e.row.cancelled,"is-light":e.row.cancelled}},[t._v(t._s(t._f("adjustShortTZ")(e.row.created)))])]),a("b-table-column",{attrs:{field:"customer.shop_name",label:"Tienda",sortable:"",searchable:""}},[a("span",{staticClass:"is-capitalized"},[t._v(t._s(e.row.shop_name))])]),a("b-table-column",{attrs:{field:"customer.fullname",label:"Cliente",sortable:"",searchable:""}},[a("span",{staticClass:"is-capitalized"},[t._v(t._s(e.row.customer.fullname))])]),a("b-table-column",{attrs:{field:"customer.phone",label:"Tel",sortable:"",searchable:""}},[a("span",{staticClass:"is-capitalized"},[t._v(t._s(e.row.customer.phone))])]),a("b-table-column",{attrs:{field:"customer.address",label:"DirecciÃ³n",sortable:"",searchable:""}},[a("span",{staticClass:"is-capitalized"},[t._v(t._s(e.row.customer.address)+" "+t._s(e.row.customer.address_extra))])]),a("b-table-column",{attrs:{field:"total",label:"Total",sortable:"",numeric:"",searchable:""}},["cash"===e.row.payment_mode?a("span",{staticClass:"tag is-grey has-text-weight-bold"},[t._v("EFECT")]):t._e(),"bank"===e.row.payment_mode?a("span",{staticClass:"tag is-grey has-text-weight-bold"},[t._v("CBU")]):t._e(),"online"===e.row.payment_mode?a("span",{staticClass:"tag is-grey has-text-weight-bold"},[t._v("ONLINE")]):t._e(),a("span",{staticClass:"has-text-weight-bold has-text-grey"},[t._v(" $"+t._s(e.row.total))])]),a("b-table-column",{staticClass:"is-actions-cell",attrs:{label:"Cobrado",numeric:""}},[a("div",{staticClass:"buttons is-right"},[a("b-switch",{attrs:{disabled:e.row.cancelled||"online"===e.row.payment_mode&&e.row.payment_complete},on:{input:function(a){return t.togglePaymentComplete(e.row)}},model:{value:e.row.payment_complete,callback:function(a){t.$set(e.row,"payment_complete",a)},expression:"props.row.payment_complete"}})],1)])]}},{key:"detail",fn:function(e){return[a("table",{staticClass:"table is-striped is-narrow"},t._l(e.row.order,(function(e,s){return a("tr",{key:s},[a("td",[a("span",[t._v(t._s(e.name)+" ("+t._s(e.count)+")")])]),a("td",[a("span",[t._v("$"+t._s(e.price))])])])})),0)]}}],null,!1,2565871239)})],1):a("notification",{staticClass:"is-info"},[a("p",[t._v("No se registran ventas para este periodo")])])],1)],1)},i=[],l=(a("4de4"),a("4160"),a("a15b"),a("d81d"),a("13d5"),a("b64b"),a("acd8"),a("e25e"),a("159b"),a("bc3a")),n=a.n(l),o=a("c1df"),r=a.n(o),c=a("d000"),d=a("25f7"),u=a("6df7"),p=a("503b"),b=a("7f57"),m=a("2b9d"),f={name:"Sales",components:{NavBar:c["a"],AsideMenu:d["a"],HeroBar:p["a"],CardComponent:u["a"],CardWidget:b["a"],Notification:m["a"]},data:function(){return{isSaleBoxActive:!1,isSaleDeliveryBoxActive:!1,defaultOpenedDetails:[],activeIndex:0,query:"",item:{},data:[],partial:[]}},sockets:{sale:function(t){this.getData()}},created:function(){this.getData()},methods:{onRowClass:function(t,e){var a=[];return t.hidden&&a.push("is-hidden"),t.cancelled&&a.push("is-cancelled"),a.join(" ")},showPartial:function(t){this.activeIndex=t,this.partial=this.data[t]},getData:function(){var t=this;this.$store.dispatch("loaded",!1),n.a.post("/sales/sort",{find:{},sort:{created:1}}).then((function(e){if(e.data.length){t.data=[],e.data.map((function(t){return t.date_group=r()(t.created).format("YYYY-MM"),t}));var a=t.$root.groupBy(e.data,"date_group");Object.keys(a).forEach((function(e){var s=a[e],i=s.filter((function(t){return t.payment_complete&&!t.cancelled})).reduce((function(t,e){return t+parseFloat(e.total)}),0),l=s.filter((function(t){return!t.cancelled})).reduce((function(t,e){return t+parseInt(e.total)||0}),0);t.data.push({date:e,formatted_date:r()(e).format("MMM YYYY").toUpperCase(),sales:s.reverse(),total:l,total_complete:i,ratio_complete:parseInt(i/l*100)}),t["statsKeys"+t.data.length-1]=0})),t.showPartial(t.data.length-1)}t.$store.dispatch("loaded",!0)}))}}},h=f,_=a("2877"),v=Object(_["a"])(h,s,i,!1,null,null,null);e["default"]=v.exports},c20d:function(t,e,a){var s=a("da84"),i=a("58a8").trim,l=a("5899"),n=s.parseInt,o=/^[+-]?0[Xx]/,r=8!==n(l+"08")||22!==n(l+"0x16");t.exports=r?function(t,e){var a=i(String(t));return n(a,e>>>0||(o.test(a)?16:10))}:n},e25e:function(t,e,a){var s=a("23e7"),i=a("c20d");s({global:!0,forced:parseInt!=i},{parseInt:i})}}]);
//# sourceMappingURL=chunk-d47dc1cc.781540d6.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cde2b24"],{"1e1d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section is-title-bar"},[a("div",{staticClass:"level is-flex-start"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("ul",t._l(t.titleStack,(function(e,s){return a("li",{key:s},[t._v(t._s(e))])})),0)])]),t.callAction?a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("div",{staticClass:"buttons is-right"},[a("router-link",{staticClass:"button is-danger",attrs:{to:t.callAction.link}},[a("b-icon",{attrs:{icon:t.callAction.icon,"custom-size":"default"}}),a("span",[t._v(t._s(t.callAction.title))])],1)],1)])]):t._e()])])},n=[],i={name:"TitleBar",props:{titleStack:{type:Array,default:function(){return[]}},callAction:{type:Object,default:function(){}}}},r=i,l=a("2877"),o=Object(l["a"])(r,s,n,!1,null,null,null);e["a"]=o.exports},"498a":function(t,e,a){"use strict";var s=a("23e7"),n=a("58a8").trim,i=a("c8d2");s({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var s=a("1d80"),n=a("5899"),i="["+n+"]",r=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),o=function(t){return function(e){var a=String(s(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(l,"")),a}};t.exports={start:o(1),end:o(2),trim:o(3)}},c8d2:function(t,e,a){var s=a("d039"),n=a("5899"),i="​᠎";t.exports=function(t){return s((function(){return!!n[t]()||i[t]()!=i||n[t].name!==t}))}},c975:function(t,e,a){"use strict";var s=a("23e7"),n=a("4d64").indexOf,i=a("a640"),r=a("ae40"),l=[].indexOf,o=!!l&&1/[1].indexOf(1,-0)<0,c=i("indexOf"),d=r("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:o||!c||!d},{indexOf:function(t){return o?l.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},dfe8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-bar"),a("aside-menu"),a("title-bar",{attrs:{"title-stack":t.titleStack}}),a("hero-bar",[a("b-icon",{attrs:{icon:"account-card-details",size:"is-large"}}),t._v(" Clientes "),a("div",{staticClass:"buttons",attrs:{slot:"right"},slot:"right"},[a("a",{staticClass:"button",on:{click:t.getData}},[a("span",[t._v("Actualizar")])]),a("a",{staticClass:"button",on:{click:t.print}},[a("span",[t._v("Imprimir")])])])],1),a("section",{staticClass:"section is-main-section"},[a("card-component",[a("b-field",{attrs:{grouped:""}},[a("b-switch",{model:{value:t.showDetailIcon,callback:function(e){t.showDetailIcon=e},expression:"showDetailIcon"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"input",attrs:{placeholder:"Buscar..."},domProps:{value:t.query},on:{keyup:t.search,input:function(e){e.target.composing||(t.query=e.target.value)}}})],1),a("b-table",{attrs:{data:t.data,"default-sort-direction":"desc","default-sort":"phone","detail-key":"phone","opened-detailed":t.defaultOpenedDetails,"row-class":t.onRowClass,detailed:"",focusable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"id",icon:"phone",width:"40",sortable:"",numeric:""}},[a("span",{staticClass:"tag is-info"},[a("b-icon",{attrs:{icon:"phone",type:"is-white",size:"is-small"}}),t._v(" "),a("span",{staticClass:"has-text-weight-bold"},[t._v(" "+t._s(e.row.phone))])],1)]),a("b-table-column",{attrs:{field:"fullname",label:"Cliente",sortable:""}},[a("span",{staticClass:"is-capitalized"},[t._v(t._s(e.row.fullname))])]),a("b-table-column",{attrs:{field:"sales_count",label:"Compras",sortable:"",numeric:""}},[a("span",{staticClass:"has-text-weight-bold has-text-grey"},[t._v(" #"+t._s(e.row.sales_count))])]),a("b-table-column",{attrs:{field:"sales_total",label:"Total",sortable:"",numeric:""}},[a("span",{staticClass:"has-text-weight-bold has-text-grey"},[t._v(" $"+t._s(e.row.sales_total))])])]}},{key:"detail",fn:function(e){return[a("table",{staticClass:"table is-striped is-narrow"},[a("tr",[a("td",{attrs:{width:"1%"}},[a("b-icon",{attrs:{size:"is-small",icon:"account"}})],1),a("td",[a("span",[t._v(t._s(e.row.fullname))])])]),a("tr",[a("td",{attrs:{width:"1%"}},[a("b-icon",{attrs:{size:"is-small",icon:"phone"}})],1),a("td",[a("span",[t._v(t._s(e.row.phone))])])]),a("tr",[a("td",{attrs:{width:"1%"}},[a("b-icon",{attrs:{size:"is-small",icon:"email"}})],1),a("td",[a("span",[t._v(t._s(e.row.email))])])]),a("tr",[a("td",{attrs:{width:"1%"}},[a("b-icon",{attrs:{size:"is-small",icon:"map"}})],1),a("td",[a("span",[t._v(t._s(e.row.address)+" "+t._s(e.row.address_extra))])])])])]}}])})],1)],1)],1)},n=[],i=(a("c975"),a("a15b"),a("d81d"),a("13d5"),a("b64b"),a("ac1f"),a("1276"),a("498a"),a("bc3a")),r=a.n(i),l=a("d000"),o=a("25f7"),c=a("6df7"),d=a("1e1d"),u=a("503b"),p={name:"Archive",components:{NavBar:l["a"],AsideMenu:o["a"],HeroBar:u["a"],TitleBar:d["a"],CardComponent:c["a"]},data:function(){return{defaultOpenedDetails:[],showDetailIcon:!1,data:[],query:""}},created:function(){this.getData()},computed:{titleStack:function(){return["Admin","Clientes"]}},methods:{onRowClass:function(t,e){var a=[];return t.hidden&&a.push("is-hidden"),a.join(" ")},getData:function(){var t=this;this.$store.dispatch("loaded",!1),r.a.get("/sales").then((function(e){t.data={};var a=e.data.map((function(t){return{fullname:t.customer.fullname,phone:t.customer.phone,email:t.customer.email,address:t.customer.address,total:t.total,count:t.order.length}}));a=t.$root.groupBy(a,"phone");var s=Object.keys(a).map((function(t){var e=a[t];return{fullname:e[0].fullname,phone:e[0].phone,email:e[0].email,address:e[0].address,address_extra:e[0].address_extra,sales_count:e.length,sales_total:e.reduce((function(t,e){return t+e.total}),0)}}));t.data=s,t.$store.dispatch("loaded",!0)}))},search:function(){var t=this,e=function(t){return t?"string"!==typeof t?t:t.toLowerCase().split("á").join("a").split("é").join("e").split("í").join("i").split("ó").join("o").split("ú").join("u").split("ñ").join("n"):""},a=e(this.query);this.data=this.data.map((function(s){var n=!0;return t.query.trim().length&&(n=-1!==e(s.fullname).indexOf(a)||-1!==e(s.phone).indexOf(a)||-1!==e(s.address).indexOf(a)),s.hidden=!n,s}))},print:function(){window.print()}},watch:{showDetailIcon:function(t){this.defaultOpenedDetails=t?this.data.map((function(t){return t.phone})):[]}}},f=p,h=a("2877"),m=Object(h["a"])(f,s,n,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-0cde2b24.a6351eb2.js.map